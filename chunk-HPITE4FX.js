import{a as ye}from"./chunk-7S4YTUI3.js";import{a as Fi,b as Ct,c as Xi,d as Zi}from"./chunk-SQW3JKPY.js";import{A as It,D as fe,E as Ot,F as Gi,G as St,H as Ki,I as qi,J as Mt,a as Mi,b as Li,c as an,d as Hi,e as $i,f as ji,g as Bi,i as Ui,j as Wi,k as Yi,l as zi,m as ft,n as ht,o as Ue,q as gt,s as _t,t as vt,v as yt,w as xt,x as bt,y as Tt,z as wt}from"./chunk-ELI6RZET.js";import{a as on}from"./chunk-P56RC3A5.js";import{a as Dt,c as Ji,d as er,e as tr,f as nr}from"./chunk-6CIIJVBS.js";import{a as Pi,d as Ei,e as je,g as Be,h as ki}from"./chunk-OBQ5ZBLJ.js";import{q as Di,u as ut,v as dt,w as pt}from"./chunk-23NTSYVS.js";import"./chunk-NKXSX425.js";import{a as me}from"./chunk-GQC6GBTQ.js";import{a as Qi}from"./chunk-RXNC5GCW.js";import{a as lt,b as rn,c as Ii}from"./chunk-PT7V5Q2Q.js";import{a as Ni}from"./chunk-WNQC6ED5.js";import{a as Vi}from"./chunk-QJ4XV6RO.js";import"./chunk-LRBDKUDH.js";import{c as Ri}from"./chunk-IMOUA4KZ.js";import{A as rt,Bb as bi,Ca as ui,E as ei,F as ti,Fa as Y,G as Ne,Ga as di,J as ce,Ja as pi,M as Le,Mb as Ee,N as ni,Nb as Ti,P as ii,Pa as mi,Q as ri,Qa as fi,Ra as hi,Sa as st,Sb as wi,U as ue,Wa as gi,Wb as Oi,Xa as _i,Xb as Si,Z as ot,ab as vi,ca as oi,fa as J,ga as qt,gb as Ci,ha as Qt,hb as pe,i as Yn,ia as ai,k as it,la as si,m as zn,ma as at,n as Gn,na as Jt,o as Xn,oa as en,p as Ve,pa as tn,qa as li,r as Zn,ra as de,rb as yi,s as Kn,sa as Q,sb as xi,ta as nn,tb as ct,u as qn,ua as He,va as De,wa as Pe,x as Qn,xa as $e,z as Jn,za as ci}from"./chunk-FEYVFRDP.js";import{a as nt,o as mt}from"./chunk-RR4QGK55.js";import{d as Ai}from"./chunk-EH7XB44O.js";import{Ac as jn,B as bn,Ba as Dn,C as Tn,Ca as P,D as se,Da as Ae,Db as m,Ea as M,Eb as f,F as ge,Fa as ne,Fb as k,Gb as H,Hb as $,Ib as Kt,Ic as et,Jb as O,Kb as qe,La as Pn,M as _e,Ma as y,Mb as b,Na as x,Nb as p,Ob as Oe,Pa as Ie,Pb as Ce,Qb as An,Qc as G,Rb as Vn,Rc as V,Sb as Qe,Sc as Bn,Tb as Se,Tc as Un,Ua as L,Ub as Me,Uc as W,Va as En,Vb as Z,Vc as tt,Wb as T,Wc as Wn,Xa as ve,Xb as le,Xc as q,Yb as D,_ as Ze,aa as wn,ca as In,cb as kn,d as ae,db as u,ec as U,fc as j,ga as Zt,gb as Ke,h as yn,ha as ke,hc as Je,ia as On,ka as Sn,kc as Nn,l as Te,la as Mn,lb as Rn,lc as w,mc as E,nc as z,ob as te,oc as Ln,pa as we,pb as Fn,pc as Hn,qa as Re,qc as $n,rc as K,sa as Fe,t as S,tb as _,u as xn,ub as ie,va as h,vb as d,wb as re,xb as A}from"./chunk-2XEAWUUP.js";import{a as xe,b as be,g as Cn}from"./chunk-T527G4PA.js";var Zr=65536,sn=class{constructor(t){this.$implicit=t}},ln=(()=>{let t=class t{constructor(){this.viewContainer=h(Rn),this.templateRef=h(Ke)}set tuiRepeatTimesOf(e){let n=Math.floor(Le(e,0,Zr)),{length:o}=this.viewContainer;e<o?this.removeContainers(o-e):this.addContainers(n)}addContainers(e){for(let n=this.viewContainer.length;n<e;n++)this.viewContainer.createEmbeddedView(this.templateRef,new sn(n))}removeContainers(e){for(let n=0;n<e;n++)this.viewContainer.remove()}};t.\u0275fac=function(n){return new(n||t)},t.\u0275dir=M({type:t,selectors:[["","tuiRepeatTimes","","tuiRepeatTimesOf",""]],inputs:{tuiRepeatTimesOf:"tuiRepeatTimesOf"},standalone:!0});let i=t;return i})();var Kr=(i,t)=>{let r=new Date(i.year,i.month,1).getDay();return r>=t?r-t:at-(t-r)},qr=({month:i,rowIndex:t,colIndex:r,firstDayOfWeek:e})=>{let n=t*at+r-Kr(i,e)+1;return n>i.daysCount&&(n-=i.daysCount,i=i.append({month:1})),n<=0&&(i=i.append({month:-1}),n=i.daysCount+n),new Q(i.year,i.month,n)},Qr=6,ir=(()=>{let t=class t{constructor(){this.firstDayOfWeek=h(st),this.currentMonth=null,this.currentSheet=[]}transform(e,n=!1){if(this.currentMonth?.monthSame(e))return this.currentSheet;let o=[];for(let a=0;a<Qr;a++){let s=[];for(let l=0;l<at;l++){let c=qr({month:e,rowIndex:a,colIndex:l,firstDayOfWeek:this.firstDayOfWeek}),g=(C,I=e)=>C.year<I.year||C.month<I.month,v=(C,I=e)=>C.year>I.year||C.month>I.month;if(!(g(c)&&!n)){if(v(c)&&!n)break;s.push(c)}}o.push(s)}return this.currentSheet=o.filter(a=>a.length),this.currentMonth=e,this.currentSheet}};t.\u0275fac=function(n){return new(n||t)},t.\u0275pipe=ne({name:"tuiCalendarSheet",type:t,pure:!0,standalone:!0});let i=t;return i})();function Jr(i){let t=i.length-1;return[i[t],...i.slice(0,t)]}var rr=(()=>{let t=class t{constructor(){this.firstDayOfWeekIndex=h(st)}transform(e){return e.pipe(S(Jr),S(n=>[...n.slice(this.firstDayOfWeekIndex),...n.slice(0,this.firstDayOfWeekIndex)]))}};t.\u0275fac=function(n){return new(n||t)},t.\u0275pipe=ne({name:"tuiOrderWeekDays",type:t,pure:!0,standalone:!0});let i=t;return i})();var eo=["*"];function to(i,t){if(i&1){let r=O();H(0),m(1,"button",1),b("click",function(){y(r);let n=p();return x(n.onLeftClick())}),T(2),f(),m(3,"span",2),Ce(4),f(),m(5,"button",3),b("click",function(){y(r);let n=p();return x(n.onRightClick())}),T(6),f(),$()}if(i&2){let r=t.ngIf,e=p();u(),A("t-hidden",e.leftComputedDisabled),d("iconStart",e.icons.decrement)("tabIndex",e.focusable?0:-1),u(),D(" ",r[0]," "),u(3),A("t-hidden",e.rightComputedDisabled),d("iconStart",e.icons.increment)("tabIndex",e.focusable?0:-1),u(),D(" ",r[1]," ")}}var or=(()=>{let t=class t{constructor(){this.icons=h(vi),this.spinTexts$=h(gi),this.focusable=!0,this.disabled=!1,this.leftDisabled=!1,this.rightDisabled=!1,this.leftClick=new L,this.rightClick=new L}onLeftClick(){this.leftComputedDisabled||this.leftClick.emit()}onRightClick(){this.rightComputedDisabled||this.rightClick.emit()}get leftComputedDisabled(){return this.disabled||this.leftDisabled}get rightComputedDisabled(){return this.disabled||this.rightDisabled}};t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=P({type:t,selectors:[["tui-spin-button"]],hostBindings:function(n,o){n&1&&b("mousedown.silent.prevent",function(){return 0})("keydown.arrowLeft.prevent",function(){return o.onLeftClick()})("keydown.arrowRight.prevent",function(){return o.onRightClick()})},inputs:{focusable:"focusable",disabled:"disabled",leftDisabled:"leftDisabled",rightDisabled:"rightDisabled"},outputs:{leftClick:"leftClick",rightClick:"rightClick"},standalone:!0,features:[j],ngContentSelectors:eo,decls:2,vars:3,consts:[[4,"ngIf"],["appearance","flat","automation-id","tui-spin-button__left","size","xs","tuiIconButton","","type","button",3,"click","iconStart","tabIndex"],[1,"t-content","t-calendar-title"],["appearance","flat","automation-id","tui-spin-button__right","size","xs","tuiIconButton","","type","button",3,"click","iconStart","tabIndex"]],template:function(n,o){n&1&&(Oe(),_(0,to,7,10,"ng-container",0),w(1,"async")),n&2&&d("ngIf",E(1,1,o.spinTexts$))},dependencies:[pe,V,W],styles:["[_nghost-%COMP%]{display:flex;align-items:center;justify-content:space-between;font:var(--tui-font-text-l);text-align:center;font-weight:700}.t-hidden[_ngcontent-%COMP%]{visibility:hidden}.t-content[_ngcontent-%COMP%]{padding:0 .5rem}"],changeDetection:0});let i=t;return i})();var no=(i,t,r,e,n)=>[i,t,r,e,n];function io(i,t){if(i&1&&k(0,"div",3),i&2){let r=t.$implicit;d("textContent",r)}}function ro(i,t){if(i&1&&k(0,"div",12),i&2){let r=p().ngIf;re("background",(r==null?null:r[1])||"")}}function oo(i,t){if(i&1&&(m(0,"div",11),k(1,"div",12),_(2,ro,1,2,"div",13),f()),i&2){let r=t.ngIf;u(),re("background",r==null?null:r[0]),u(),d("ngIf",r.length>1)}}function ao(i,t){if(i&1){let r=O();m(0,"div",8),b("click",function(){y(r);let n=p().tuiLet,o=p(4);return x(o.onItemClick(n))})("tuiHoveredChange",function(n){y(r);let o=p().tuiLet,a=p(4);return x(a.onItemHovered(n&&o))}),m(1,"div",9),w(2,"tuiMapper"),T(3),_(4,oo,3,3,"div",10),w(5,"tuiMapper"),f()()}if(i&2){let r=p().tuiLet,e=p(4);A("t-cell_disabled",e.disabledItemHandler(r))("t-cell_interval",e.itemIsInterval(r))("t-cell_today",e.itemIsToday(r))("t-cell_unavailable",e.itemIsUnavailable(r)),ie("data-range",e.getItemRange(r)),u(),A("t-item_unavailable",e.itemIsUnavailable(r)),ie("data-type",z(2,14,r,e.dayTypeHandler)),u(2),D(" ",r.day," "),u(),d("ngIf",$n(5,17,Nn(23,no,r,e.toMarkers,e.itemIsToday(r),!!e.getItemRange(r),e.markerHandler)))}}function so(i,t){if(i&1&&(H(0),_(1,ao,6,29,"div",7),$()),i&2){let r=t.tuiLet,e=p(4);u(),d("ngIf",!e.itemIsUnavailable(r)||e.showAdjacent)}}function lo(i,t){if(i&1&&(H(0),_(1,so,2,1,"ng-container",2),$()),i&2){let r=t.$implicit,e=p().$implicit,n=p().tuiLet;u(),d("tuiLet",n[e][r])}}function co(i,t){if(i&1&&(m(0,"div",5),_(1,lo,2,1,"ng-container",6),f()),i&2){let r=t.$implicit,e=p().tuiLet;u(),d("tuiRepeatTimesOf",e[r].length)}}function uo(i,t){if(i&1&&(m(0,"div"),_(1,co,2,1,"div",4),f()),i&2){let r=t.tuiLet;u(),d("tuiRepeatTimesOf",r.length)}}function po(i,t){if(i&1&&(H(0),T(1),$()),i&2){let r=p();u(),D(" ",r.value.formattedYear," ")}}function mo(i,t){if(i&1){let r=O();m(0,"button",3),b("click",function(){y(r);let n=p();return x(n.onYearClick())}),T(1),f()}if(i&2){let r=p();u(),D(" ",r.value.formattedYear," ")}}function fo(i,t){if(i&1){let r=O();m(0,"div",4),b("click",function(){let n=y(r).tuiLet,o=p(3);return x(o.yearClick.emit(n))})("tuiHoveredChange",function(n){let o=y(r).tuiLet,a=p(3);return x(a.onItemHovered(n,o))}),m(1,"div",5),T(2),f()()}if(i&2){let r=t.tuiLet,e=p(3);A("t-cell_disabled",e.isDisabled(r))("t-cell_interval",e.itemIsInterval(r))("t-cell_today",e.itemIsToday(r)),d("tuiScrollIntoView",e.scrollItemIntoView(r)),ie("data-range",e.getItemRange(r)),u(2),le(r)}}function ho(i,t){if(i&1&&(H(0),_(1,fo,3,9,"div",3),$()),i&2){let r=t.$implicit,e=p().$implicit,n=p();u(),d("tuiLet",n.getItem(e,r))}}function go(i,t){i&1&&(m(0,"div",1),_(1,ho,2,1,"ng-container",2),f()),i&2&&(u(),d("tuiRepeatTimesOf",4))}function _o(i,t){if(i&1){let r=O();m(0,"tui-scrollbar",2)(1,"tui-calendar-year",3),b("yearClick",function(n){y(r);let o=p();return x(o.onPickerYearClick(n))}),f()()}if(i&2){let r=p();u(),d("initialItem",r.month.year)("max",r.computedMax.year)("min",r.computedMin.year)("value",r.value)}}function vo(i,t){if(i&1){let r=O();m(0,"tui-calendar-spin",4),b("valueChange",function(n){y(r);let o=p();return x(o.onPaginationValueChange(n))})("yearClick",function(){y(r);let n=p();return x(n.onPaginationYearClick())}),f(),m(1,"tui-calendar-sheet",5),w(2,"tuiMapper"),b("dayClick",function(n){y(r);let o=p();return x(o.onDayClick(n))})("hoveredItemChange",function(n){y(r);let o=p();return x(o.onHoveredItemChange(n))}),f()}if(i&2){let r=p();d("max",r.computedMaxViewedMonth)("min",r.computedMinViewedMonth)("value",r.month),u(),d("disabledItemHandler",Hn(2,9,r.disabledItemHandler,r.disabledItemHandlerMapper,r.computedMin,r.computedMax))("hoveredItem",r.hoveredItem)("markerHandler",r.markerHandler)("month",r.month)("showAdjacent",r.showAdjacent)("value",r.value)}}var Co=(()=>{let t=class t{constructor(){this.today=Q.currentLocal(),this.unorderedWeekDays$=h(_i),this.dayTypeHandler=h(hi),this.month=de.currentLocal(),this.disabledItemHandler=J,this.markerHandler=null,this.value=null,this.hoveredItem=null,this.showAdjacent=!0,this.hoveredItemChange=new L,this.dayClick=new L,this.toMarkers=(e,n,o,a)=>{if(n||o)return null;let s=a?.(e);return s?.length?s:null}}itemIsInterval(e){let{value:n,hoveredItem:o}=this;if(!(n instanceof He))return!1;if(!n.isSingleDay)return n.from.daySameOrBefore(e)&&n.to.dayAfter(e);if(o===null)return!1;let a=He.sort(n.from,o);return a.from.daySameOrBefore(e)&&a.to.dayAfter(e)}onItemHovered(e){this.updateHoveredItem(e||null)}getItemRange(e){let{value:n,hoveredItem:o}=this;return n?n instanceof Q?n.daySame(e)?"single":null:n instanceof He?n.from.daySame(e)&&!n.isSingleDay||o?.dayAfter(n.from)&&n.from.daySame(e)&&n.isSingleDay||o?.daySame(e)&&o.dayBefore(n.from)&&n.isSingleDay?"start":n.to.daySame(e)&&!n.isSingleDay||o?.dayBefore(n.from)&&n.from.daySame(e)&&n.isSingleDay||o?.daySame(e)&&o.dayAfter(n.from)&&n.isSingleDay?"end":n.isSingleDay&&n.from.daySame(e)?"single":null:n.find(a=>a.daySame(e))?"single":null:null}get isSingleDayRange(){return this.value instanceof He&&this.value.isSingleDay}itemIsToday(e){return this.today.daySame(e)}itemIsUnavailable(e){return!this.month.monthSame(e)}onItemClick(e){this.dayClick.emit(e)}updateHoveredItem(e){Ne(this.hoveredItem,e,(n,o)=>n.daySame(o))||(this.hoveredItem=e,this.hoveredItemChange.emit(e))}};t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=P({type:t,selectors:[["tui-calendar-sheet"]],hostVars:2,hostBindings:function(n,o){n&2&&A("_single",o.isSingleDayRange)},inputs:{month:"month",disabledItemHandler:"disabledItemHandler",markerHandler:"markerHandler",value:"value",hoveredItem:"hoveredItem",showAdjacent:"showAdjacent"},outputs:{hoveredItemChange:"hoveredItemChange",dayClick:"dayClick"},standalone:!0,features:[j],decls:6,vars:9,consts:[[1,"t-row","t-row_weekday"],["class","t-cell",3,"textContent",4,"ngFor","ngForOf"],[4,"tuiLet"],[1,"t-cell",3,"textContent"],["automation-id","tui-calendar-sheet__row","class","t-row",4,"tuiRepeatTimes","tuiRepeatTimesOf"],["automation-id","tui-calendar-sheet__row",1,"t-row"],[4,"tuiRepeatTimes","tuiRepeatTimesOf"],["automation-id","tui-calendar-sheet__cell","class","t-cell",3,"t-cell_disabled","t-cell_interval","t-cell_today","t-cell_unavailable","click","tuiHoveredChange",4,"ngIf"],["automation-id","tui-calendar-sheet__cell",1,"t-cell",3,"click","tuiHoveredChange"],["automation-id","tui-calendar-sheet__item",1,"t-item"],["class","t-dots",4,"ngIf"],[1,"t-dots"],[1,"t-dot"],["class","t-dot",3,"background",4,"ngIf"]],template:function(n,o){n&1&&(m(0,"div",0),_(1,io,1,1,"div",1),w(2,"tuiOrderWeekDays"),w(3,"async"),f(),_(4,uo,2,1,"div",2),w(5,"tuiCalendarSheet")),n&2&&(u(),d("ngForOf",E(3,4,E(2,2,o.unorderedWeekDays$))),u(3),d("tuiLet",z(5,6,o.month,!0)))},dependencies:[q,G,V,W,ye,rn,ln,on,ir,rr],styles:['[_nghost-%COMP%]{display:block;font:var(--tui-font-text-m)}.t-row[_ngcontent-%COMP%]{position:relative;display:flex;justify-content:space-between;height:2.25rem;isolation:isolate}.t-item[_ngcontent-%COMP%]{position:relative;flex:1;line-height:2rem;border-radius:var(--tui-radius-m)}.t-item[_ngcontent-%COMP%]:before, .t-item[_ngcontent-%COMP%]:after{position:absolute;top:0;left:0;bottom:0;right:0;content:"";z-index:-1;border-radius:var(--tui-radius-m)}.t-item[_ngcontent-%COMP%]:after{border-radius:.5rem}.t-cell[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;justify-content:center;width:2.25rem;text-align:center;outline:none;cursor:pointer;background-clip:content-box;box-sizing:border-box;border:.125rem solid transparent}.t-cell[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;right:0;bottom:0;z-index:-1;border-radius:var(--tui-radius-m)}.t-cell_today[_ngcontent-%COMP%]:after{position:absolute;left:50%;transform:translate(-50%);content:"";bottom:.3125rem;height:.125rem;width:.75rem;border-radius:.375rem;background:var(--tui-text-primary)}.t-cell_interval[_ngcontent-%COMP%]:before{background:var(--tui-background-base-alt)}._single[_nghost-%COMP%]   .t-cell_interval[_ngcontent-%COMP%]:before{background:var(--tui-background-neutral-1-hover)}.t-cell_interval[_ngcontent-%COMP%]:not(:last-child):before{right:-.1875rem;border-top-right-radius:0;border-bottom-right-radius:0}.t-cell_interval[_ngcontent-%COMP%]:not([data-range=start]):not(:first-child):before{border-top-left-radius:0;border-bottom-left-radius:0}.t-cell_interval[_ngcontent-%COMP%]:last-child:first-child:before{right:0}.t-cell_interval[_ngcontent-%COMP%]:first-child > .t-item[_ngcontent-%COMP%]{border-top-left-radius:var(--tui-radius-m);border-bottom-left-radius:var(--tui-radius-m)}.t-cell_interval[_ngcontent-%COMP%]:last-child > .t-item[_ngcontent-%COMP%]{border-top-right-radius:var(--tui-radius-m);border-bottom-right-radius:var(--tui-radius-m)}.t-cell_interval[_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]{border-radius:0}.t-cell[data-range][_ngcontent-%COMP%]:after{background:var(--tui-text-primary-on-accent-1)}.t-cell[data-range][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]{color:var(--tui-text-primary-on-accent-1)}.t-cell[data-range][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:before, .t-cell[data-range][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:after{background:var(--tui-background-accent-1)}.t-cell[data-range][_ngcontent-%COMP%]:hover > .t-item[_ngcontent-%COMP%]:before, .t-cell[data-range][_ngcontent-%COMP%]:hover > .t-item[_ngcontent-%COMP%]:after{background:var(--tui-background-accent-1-hover)}.t-cell[data-range][_ngcontent-%COMP%]:active > .t-item[_ngcontent-%COMP%]:before, .t-cell[data-range][_ngcontent-%COMP%]:active > .t-item[_ngcontent-%COMP%]:after{background:var(--tui-background-accent-1-pressed)}.t-cell[data-range=end][_ngcontent-%COMP%]:before{background:var(--tui-background-base-alt)}._single[_nghost-%COMP%]   .t-cell[data-range=end][_ngcontent-%COMP%]:before{background:var(--tui-background-neutral-1-hover)}.t-cell[data-range=end][_ngcontent-%COMP%]:not(:first-child):before{border-top-left-radius:0;border-bottom-left-radius:0}.t-cell[data-range=end][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:before{left:.625rem;border-top-left-radius:0;border-bottom-left-radius:0}.t-cell[data-range=end][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:after{left:-2rem;right:100%;transform:translate(1.6rem) scaleY(.83) scaleX(.5) rotate(45deg)}.t-cell[data-range=start][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:before{right:.625rem;border-top-right-radius:0;border-bottom-right-radius:0}.t-cell[data-range=start][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:after{left:100%;right:-2rem;transform:translate(-1.6rem) scaleY(.83) scaleX(.5) rotate(45deg)}.t-cell[data-range=single][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:after{display:none}.t-cell_disabled[_ngcontent-%COMP%]{pointer-events:none}.t-cell_disabled[_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]{opacity:.36}.t-cell[_ngcontent-%COMP%]:hover:not([data-range]) > .t-item[_ngcontent-%COMP%]{background:var(--tui-background-neutral-1-hover)}.t-cell[_ngcontent-%COMP%]:active:not([data-range]) > .t-item[_ngcontent-%COMP%]{background:var(--tui-background-neutral-1-pressed)}[_nghost-%COMP%]{width:15.75rem}[data-type=weekday][_ngcontent-%COMP%]{color:var(--tui-text-primary)}[data-type=weekend][_ngcontent-%COMP%]{color:var(--tui-text-negative)}.t-row[_ngcontent-%COMP%]{justify-content:flex-start}.t-row[_ngcontent-%COMP%]:first-child{justify-content:flex-end}.t-row_weekday[_ngcontent-%COMP%]{font:var(--tui-font-text-s);color:var(--tui-text-secondary);pointer-events:none}.t-item[_ngcontent-%COMP%]{display:flex;flex-direction:column}.t-item_unavailable[_ngcontent-%COMP%]{opacity:var(--tui-disabled-opacity)}.t-dots[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-top:-.5rem;padding-bottom:.25rem}.t-dot[_ngcontent-%COMP%]{display:inline-block;width:.25rem;height:.25rem;border-radius:100%;margin:0 .0625rem}'],changeDetection:0});let i=t;return i})(),yo=(()=>{let t=class t{constructor(){this.value=de.currentLocal(),this.min=De,this.max=Pe,this.valueChange=new L,this.yearClick=new L}onYearClick(){this.yearClick.next(this.value)}append(e){let n=this.value.append(e);this.min.monthSameOrAfter(n)?this.updateValue(this.min):this.updateValue(this.max.monthSameOrBefore(n)?this.max:n)}updateValue(e){this.value.monthSame(e)||(this.value=e,this.valueChange.emit(e))}};t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=P({type:t,selectors:[["tui-calendar-spin"]],inputs:{value:"value",min:"min",max:"max"},outputs:{valueChange:"valueChange",yearClick:"yearClick"},standalone:!0,features:[j],decls:7,vars:10,consts:[["button",""],[3,"leftClick","rightClick","focusable","leftDisabled","rightDisabled"],[4,"ngIf","ngIfElse"],["id","year-btn","automation-id","tui-primitive-year-month-pagination__year-button","tabIndex","-1","tuiLink","","type","button",3,"click"]],template:function(n,o){if(n&1){let a=O();m(0,"tui-spin-button",1),b("leftClick",function(){return y(a),x(o.append({month:-1}))})("rightClick",function(){return y(a),x(o.append({month:1}))}),T(1),w(2,"tuiMonth"),w(3,"async"),_(4,po,2,1,"ng-container",2)(5,mo,2,1,"ng-template",null,0,K),f()}if(n&2){let a=Z(6);d("focusable",!1)("leftDisabled",o.value.monthSameOrBefore(o.min))("rightDisabled",o.value.monthSameOrAfter(o.max)),u(),D(" ",E(3,8,E(2,6,o.value))," "),u(3),d("ngIf",o.min.year===o.max.year)("ngIfElse",a)}},dependencies:[or,lt,Mi,V,W],styles:["[_nghost-%COMP%]{display:block}"],changeDetection:0});let i=t;return i})(),ar=100,sr=4,xo=(()=>{let t=class t{constructor(){this.hoveredItem=null,this.currentYear=de.currentLocal().year,this.value=null,this.initialItem=this.currentYear,this.min=Jt,this.max=en,this.disabledItemHandler=J,this.yearClick=new L}isDisabled(e){return this.max&&this.max<e||this.min&&this.min>e||this.disabledItemHandler(e)}getItemRange(e){let{value:n,hoveredItem:o}=this;return n===null?null:n instanceof li?n.year===e?"single":null:ei(n)?n===e?"single":null:n instanceof nn?n.from.year===e&&!n.from.yearSame(n.to)||o!==null&&o>n.from.year&&n.from.year===e&&n.from.yearSame(n.to)||o!==null&&o===e&&o<n.from.year&&n.from.yearSame(n.to)?"start":n.to.year===e&&!n.from.yearSame(n.to)||o!==null&&o<n.from.year&&n.from.year===e&&n.from.yearSame(n.to)||o!==null&&o===e&&o>n.from.year&&n.from.yearSame(n.to)?"end":n.from.yearSame(n.to)&&n.from.year===e?"single":null:n.find(a=>a.year===e)?"single":null}itemIsInterval(e){let{value:n,hoveredItem:o}=this;return this.isRange(n)?n.from.yearSame(n.to)?o===null||n.from.year===o?!1:ni(e,Math.min(n.from.year,o),Math.max(n.from.year,o)):n.from.year<=e&&n.to.year>e:!1}onItemHovered(e,n){this.updateHoveredItem(e,n)}get isSingle(){return this.isRange(this.value)&&this.value.from.yearSame(this.value.to)}get rows(){return Math.ceil((this.calculatedMax-this.calculatedMin)/sr)}isRange(e){return e instanceof nn}scrollItemIntoView(e){return this.initialItem===e}getItem(e,n){return e*sr+n+this.calculatedMin}itemIsToday(e){return this.currentYear===e}get calculatedMin(){let e=this.initialItem-ar,n=this.min??Jt;return n>e?n:e}get calculatedMax(){let e=this.initialItem+ar,n=this.max??en;return n<e?n+1:e}updateHoveredItem(e,n){this.hoveredItem=e?n:null}};t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=P({type:t,selectors:[["tui-calendar-year"]],hostVars:2,hostBindings:function(n,o){n&2&&A("_single",o.isSingle)},inputs:{value:"value",initialItem:"initialItem",min:"min",max:"max",disabledItemHandler:"disabledItemHandler"},outputs:{yearClick:"yearClick"},standalone:!0,features:[j],decls:1,vars:1,consts:[["automation-id","tui-calendar-year__row","class","t-row",4,"tuiRepeatTimes","tuiRepeatTimesOf"],["automation-id","tui-calendar-year__row",1,"t-row"],[4,"tuiRepeatTimes","tuiRepeatTimesOf"],["automation-id","tui-calendar-year__cell","class","t-cell",3,"t-cell_disabled","t-cell_interval","t-cell_today","tuiScrollIntoView","click","tuiHoveredChange",4,"tuiLet"],["automation-id","tui-calendar-year__cell",1,"t-cell",3,"click","tuiHoveredChange","tuiScrollIntoView"],[1,"t-item"]],template:function(n,o){n&1&&_(0,go,2,1,"div",0),n&2&&d("tuiRepeatTimesOf",o.rows)},dependencies:[on,ln,ye,Si],styles:['[_nghost-%COMP%]{display:block;font:var(--tui-font-text-m)}.t-row[_ngcontent-%COMP%]{position:relative;display:flex;justify-content:space-between;height:2.25rem;isolation:isolate}.t-item[_ngcontent-%COMP%]{position:relative;flex:1;line-height:2rem;border-radius:var(--tui-radius-m)}.t-item[_ngcontent-%COMP%]:before, .t-item[_ngcontent-%COMP%]:after{position:absolute;top:0;left:0;bottom:0;right:0;content:"";z-index:-1;border-radius:var(--tui-radius-m)}.t-item[_ngcontent-%COMP%]:after{border-radius:.5rem}.t-cell[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;justify-content:center;width:3.9375rem;text-align:center;outline:none;cursor:pointer;background-clip:content-box;box-sizing:border-box;border:.125rem solid transparent}.t-cell[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;right:0;bottom:0;z-index:-1;border-radius:var(--tui-radius-m)}.t-cell_today[_ngcontent-%COMP%]:after{position:absolute;left:50%;transform:translate(-50%);content:"";bottom:.3125rem;height:.125rem;width:.75rem;border-radius:.375rem;background:var(--tui-text-primary)}.t-cell_interval[_ngcontent-%COMP%]:before{background:var(--tui-background-base-alt)}._single[_nghost-%COMP%]   .t-cell_interval[_ngcontent-%COMP%]:before{background:var(--tui-background-neutral-1-hover)}.t-cell_interval[_ngcontent-%COMP%]:not(:last-child):before{right:-.1875rem;border-top-right-radius:0;border-bottom-right-radius:0}.t-cell_interval[_ngcontent-%COMP%]:not([data-range=start]):not(:first-child):before{border-top-left-radius:0;border-bottom-left-radius:0}.t-cell_interval[_ngcontent-%COMP%]:last-child:first-child:before{right:0}.t-cell_interval[_ngcontent-%COMP%]:first-child > .t-item[_ngcontent-%COMP%]{border-top-left-radius:var(--tui-radius-m);border-bottom-left-radius:var(--tui-radius-m)}.t-cell_interval[_ngcontent-%COMP%]:last-child > .t-item[_ngcontent-%COMP%]{border-top-right-radius:var(--tui-radius-m);border-bottom-right-radius:var(--tui-radius-m)}.t-cell_interval[_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]{border-radius:0}.t-cell[data-range][_ngcontent-%COMP%]:after{background:var(--tui-text-primary-on-accent-1)}.t-cell[data-range][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]{color:var(--tui-text-primary-on-accent-1)}.t-cell[data-range][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:before, .t-cell[data-range][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:after{background:var(--tui-background-accent-1)}.t-cell[data-range][_ngcontent-%COMP%]:hover > .t-item[_ngcontent-%COMP%]:before, .t-cell[data-range][_ngcontent-%COMP%]:hover > .t-item[_ngcontent-%COMP%]:after{background:var(--tui-background-accent-1-hover)}.t-cell[data-range][_ngcontent-%COMP%]:active > .t-item[_ngcontent-%COMP%]:before, .t-cell[data-range][_ngcontent-%COMP%]:active > .t-item[_ngcontent-%COMP%]:after{background:var(--tui-background-accent-1-pressed)}.t-cell[data-range=end][_ngcontent-%COMP%]:before{background:var(--tui-background-base-alt)}._single[_nghost-%COMP%]   .t-cell[data-range=end][_ngcontent-%COMP%]:before{background:var(--tui-background-neutral-1-hover)}.t-cell[data-range=end][_ngcontent-%COMP%]:not(:first-child):before{border-top-left-radius:0;border-bottom-left-radius:0}.t-cell[data-range=end][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:before{left:.625rem;border-top-left-radius:0;border-bottom-left-radius:0}.t-cell[data-range=end][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:after{left:-2rem;right:100%;transform:translate(1.6rem) scaleY(.83) scaleX(.5) rotate(45deg)}.t-cell[data-range=start][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:before{right:.625rem;border-top-right-radius:0;border-bottom-right-radius:0}.t-cell[data-range=start][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:after{left:100%;right:-2rem;transform:translate(-1.6rem) scaleY(.83) scaleX(.5) rotate(45deg)}.t-cell[data-range=single][_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]:after{display:none}.t-cell_disabled[_ngcontent-%COMP%]{pointer-events:none}.t-cell_disabled[_ngcontent-%COMP%] > .t-item[_ngcontent-%COMP%]{opacity:.36}.t-cell[_ngcontent-%COMP%]:hover:not([data-range]) > .t-item[_ngcontent-%COMP%]{background:var(--tui-background-neutral-1-hover)}.t-cell[_ngcontent-%COMP%]:active:not([data-range]) > .t-item[_ngcontent-%COMP%]{background:var(--tui-background-neutral-1-pressed)}[_nghost-%COMP%]{width:15.75rem}.t-row[_ngcontent-%COMP%]{margin:.875rem 0}.t-row[_ngcontent-%COMP%]:first-child{margin-top:0}.t-row[_ngcontent-%COMP%]:last-child{margin-bottom:0}'],changeDetection:0});let i=t;return i})(),Pt=(()=>{let t=class t{constructor(){this.day=null,this.view="month",this.month=de.currentLocal(),this.disabledItemHandler=J,this.min=De,this.max=Pe,this.minViewedMonth=De,this.maxViewedMonth=Pe,this.hoveredItem=null,this.showAdjacent=!0,this.markerHandler=null,this.dayClick=new L,this.monthChange=new L,this.hoveredItemChange=new L,this.disabledItemHandlerMapper=(e,n,o)=>a=>a.dayBefore(n)||a.dayAfter(o)||e(a)}set value(e){this.day=e,this.showAdjacent&&e instanceof Q&&(this.month=e)}set initialView(e){this.view=e}get value(){return this.day}onPaginationValueChange(e){this.updateViewedMonth(e)}onDayClick(e){this.dayClick.emit(e)}onHoveredItemChange(e){this.updateHoveredDay(e)}get computedMin(){return this.min??De}get computedMax(){return this.max??Pe}get computedMinViewedMonth(){let e=this.computedMin,n=this.minViewedMonth??De;return n.monthSameOrAfter(e)?n:e}get computedMaxViewedMonth(){let e=this.computedMax,n=this.maxViewedMonth??Pe;return n.monthSameOrBefore(e)?n:e}get isInYearView(){return this.view==="year"}onPaginationYearClick(){this.view="year"}onPickerYearClick(e){this.view="month",this.updateViewedMonth(new de(e,this.month.month))}updateViewedMonth(e){this.month.monthSame(e)||(this.month=e,this.monthChange.emit(e))}updateHoveredDay(e){Ne(this.hoveredItem,e,(n,o)=>n.daySame(o))||(this.hoveredItem=e,this.hoveredItemChange.emit(e))}};t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=P({type:t,selectors:[["tui-calendar"]],inputs:{month:"month",disabledItemHandler:"disabledItemHandler",min:"min",max:"max",minViewedMonth:"minViewedMonth",maxViewedMonth:"maxViewedMonth",hoveredItem:"hoveredItem",showAdjacent:"showAdjacent",markerHandler:"markerHandler",value:"value",initialView:"initialView"},outputs:{dayClick:"dayClick",monthChange:"monthChange",hoveredItemChange:"hoveredItemChange"},standalone:!0,features:[j],decls:3,vars:2,consts:[["calendar",""],["automation-id","tui-calendar__scrollbar","class","t-scrollbar",4,"ngIf","ngIfElse"],["automation-id","tui-calendar__scrollbar",1,"t-scrollbar"],["automation-id","tui-calendar__year",3,"yearClick","initialItem","max","min","value"],["automation-id","tui-calendar__pagination",1,"t-pagination",3,"valueChange","yearClick","max","min","value"],["automation-id","tui-calendar__calendar",3,"dayClick","hoveredItemChange","disabledItemHandler","hoveredItem","markerHandler","month","showAdjacent","value"]],template:function(n,o){if(n&1&&_(0,_o,2,4,"tui-scrollbar",1)(1,vo,3,14,"ng-template",null,0,K),n&2){let a=Z(2);d("ngIf",o.isInYearView)("ngIfElse",a)}},dependencies:[V,Oi,xo,yo,Co,rn],styles:["[_nghost-%COMP%]{display:block;min-height:18.25rem;width:15.75rem;padding:1rem 1.125rem;box-sizing:content-box}.t-scrollbar[_ngcontent-%COMP%]{height:18.25rem;width:16.875rem}.t-pagination[_ngcontent-%COMP%]{margin-bottom:1rem}"],changeDetection:0});let i=t;return i})();function lr(i){let{anchorOffset:t=0,focusOffset:r=0}=i.ownerDocument.getSelection()||{},e=Math.min(t,r),n=Math.max(t,r);return[e,n]}function To(i,[t,r]){var e,n;let o=i.ownerDocument,a=o.createRange();a.setStart(i.firstChild||i,Math.min(t,((e=i.textContent)===null||e===void 0?void 0:e.length)||0)),a.setEnd(i.lastChild||i,Math.min(r,((n=i.textContent)===null||n===void 0?void 0:n.length)||0));let s=o.getSelection();s&&(s.removeAllRanges(),s.addRange(a))}var cn=class{constructor(t){this.element=t,this.maxLength=1/0}get value(){return this.element.innerText.replace(/\n\n$/,`
`)}set value(t){this.element.innerHTML=t.replace(/\n$/,`

`)}get selectionStart(){return lr(this.element)[0]}get selectionEnd(){return lr(this.element)[1]}setSelectionRange(t,r){To(this.element,[t||0,r||0])}select(){this.setSelectionRange(0,this.value.length)}};function wo(i){let t=new cn(i);return new Proxy(i,{get(r,e){if(e in t)return t[e];let n=r[e];return typeof n=="function"?n.bind(r):n},set(r,e,n,o){return Reflect.set(e in t?t:r,e,n,o)}})}var pr=i=>i.isContentEditable?wo(i):i.querySelector("input,textarea")||i,he={mask:/^.*$/,preprocessors:[],postprocessors:[],plugins:[],overwriteMode:"shift"},un=class{constructor(){this.now=null,this.past=[],this.future=[]}undo(){let t=this.past.pop();t&&this.now&&(this.future.push(this.now),this.updateElement(t,"historyUndo"))}redo(){let t=this.future.pop();t&&this.now&&(this.past.push(this.now),this.updateElement(t,"historyRedo"))}updateHistory(t){if(!this.now){this.now=t;return}let r=this.now.value!==t.value,e=this.now.selection.some((n,o)=>n!==t.selection[o]);!r&&!e||(r&&(this.past.push(this.now),this.future=[]),this.now=t)}updateElement(t,r){this.now=t,this.updateElementState(t,{inputType:r,data:null})}};function Io(i,...t){return t.every(({value:r})=>r===i.value)}function Oo(i,...t){return t.every(({value:r,selection:e})=>r===i.value&&e[0]===i.selection[0]&&e[1]===i.selection[1])}function So({value:i,selection:t},r,e){let[n,o]=t,a=typeof e=="function"?e({value:i,selection:t}):e;return{value:i,selection:a==="replace"?[n,n+r.length]:[n,o]}}function Ft(i){return typeof i=="string"}function cr(i,t,r,e){let n="";for(let o=t.length;o<i.length;o++){let a=i[o],s=e?.value[o]===a;if(!Ft(a)||a===r&&!s)return n;n+=a}return n}function mr(i,t){return Array.isArray(t)?i.length===t.length&&Array.from(i).every((r,e)=>{let n=t[e];return Ft(n)?r===n:r.match(n)}):t.test(i)}function Mo(i,t,r){let e=null,n=null,o=Array.from(i.value).reduce((s,l,c)=>{let g=cr(t,s,l,r),v=s+g,C=t[v.length];return Ft(C)?v+C:l.match(C)?(e===null&&c>=i.selection[0]&&(e=v.length),n===null&&c>=i.selection[1]&&(n=v.length),v+l):v},""),a=cr(t,o,"",r);return{value:mr(o+a,t)?o+a:o,selection:[e??o.length,n??o.length]}}function Do({value:i,selection:t},r){let[e,n]=t,o=e,a=n;return{value:Array.from(i).reduce((l,c,g)=>{let v=l+c;return e===g&&(o=l.length),n===g&&(a=l.length),v.match(r)?v:l},""),selection:[o,a]}}function Et(i,t,r=null){if(mr(i.value,t))return i;let{value:e,selection:n}=Array.isArray(t)?Mo(i,t,r):Do(i,t);return{selection:n,value:Array.isArray(t)?e.slice(0,t.length):e}}function ur(i,t){if(!Array.isArray(t))return i;let[r,e]=i.selection,n=[],o=Array.from(i.value).reduce((a,s,l)=>{let c=t[l];return l===r&&n.push(a.length),l===e&&n.push(a.length),Ft(c)&&c===s?a:a+s},"");return n.length<2&&n.push(...new Array(2-n.length).fill(o.length)),{value:o,selection:[n[0],n[1]]}}var Ge=class{constructor(t,r){this.initialElementState=t,this.maskOptions=r,this.value="",this.selection=[0,0];let{value:e,selection:n}=Et(this.initialElementState,this.getMaskExpression(this.initialElementState));this.value=e,this.selection=n}addCharacters([t,r],e){let{value:n}=this,o=this.getMaskExpression({value:n.slice(0,t)+e+n.slice(r),selection:[t+e.length,t+e.length]}),a={value:n,selection:[t,r]},s=ur(a,o),[l,c]=So(s,e,this.maskOptions.overwriteMode).selection,g=s.value.slice(0,l)+e,v=g.length,C=Et({value:g+s.value.slice(c),selection:[v,v]},o,a);if(n.slice(0,l)===Et({value:g,selection:[v,v]},o,a).value||Oo(this,C))throw new Error("Invalid mask value");this.value=C.value,this.selection=C.selection}deleteCharacters([t,r]){if(t===r||!r)return;let{value:e}=this,n=this.getMaskExpression({value:e.slice(0,t)+e.slice(r),selection:[t,t]}),o={value:e,selection:[t,r]},a=ur(o,n),[s,l]=a.selection,c=a.value.slice(0,s)+a.value.slice(l),g=Et({value:c,selection:[s,s]},n,o);this.value=g.value,this.selection=g.selection}getMaskExpression(t){let{mask:r}=this.maskOptions;return typeof r=="function"?r(t):r}},dn=class{constructor(t){this.element=t,this.listeners=[]}listen(t,r,e){let n=r;this.element.addEventListener(t,n,e),this.listeners.push(()=>this.element.removeEventListener(t,n))}destroy(){this.listeners.forEach(t=>t())}},ee={CTRL:1,ALT:2,SHIFT:4,META:8},Ye={Y:89,Z:90};function ze(i,t,r){return i.ctrlKey===!!(t&ee.CTRL)&&i.altKey===!!(t&ee.ALT)&&i.shiftKey===!!(t&ee.SHIFT)&&i.metaKey===!!(t&ee.META)&&i.keyCode===r}function Po(i){return ze(i,ee.CTRL,Ye.Y)||ze(i,ee.CTRL|ee.SHIFT,Ye.Z)||ze(i,ee.META|ee.SHIFT,Ye.Z)}function Eo(i){return ze(i,ee.CTRL,Ye.Z)||ze(i,ee.META,Ye.Z)}function fr(i,t){var r;let e=i.value;if(typeof t=="string")i.value=t;else{let[n,o]=t.selection;i.value=t.value,i.matches(":focus")&&((r=i.setSelectionRange)===null||r===void 0||r.call(i,n,o))}i.value!==e&&i.dispatchEvent(new Event("input",{bubbles:!0}))}function ko({value:i,selection:t},r){let[e,n]=t;if(e!==n)return[e,n];let o=r?i.slice(e).indexOf(`
`)+1||i.length:i.slice(0,n).lastIndexOf(`
`)+1;return[r?e:o,r?o:n]}function Ro({value:i,selection:t},r){let[e,n]=t;return e!==n?[e,n]:(r?[e,n+1]:[e-1,n]).map(a=>Math.min(Math.max(a,0),i.length))}var Fo=/\s+$/g,Ao=/^\s+/g,dr=/\s/;function Vo({value:i,selection:t},r){let[e,n]=t;if(e!==n)return[e,n];if(r){let l=i.slice(e),[c]=l.match(Ao)||[""],g=l.trimStart().search(dr);return[e,g!==-1?e+c.length+g:i.length]}let o=i.slice(0,n),[a]=o.match(Fo)||[""],s=o.trimEnd().split("").reverse().findIndex(l=>l.match(dr));return[s!==-1?n-a.length-s:0,n]}function kt(i=[]){return(t,...r)=>i.reduce((e,n)=>Object.assign(Object.assign({},e),n(e,...r)),t)}function At(i,t){let r=Object.assign(Object.assign({},he),t),e=kt(r.preprocessors),n=kt(r.postprocessors),o=typeof i=="string"?{value:i,selection:[0,0]}:i,{elementState:a}=e({elementState:o,data:""},"validation"),s=new Ge(a,r),{value:l,selection:c}=n(s,o);return typeof i=="string"?l:{value:l,selection:c}}var Rt=class extends un{constructor(t,r){super(),this.element=t,this.maskitoOptions=r,this.isTextArea=this.element.nodeName==="TEXTAREA",this.eventListener=new dn(this.element),this.options=Object.assign(Object.assign({},he),this.maskitoOptions),this.preprocessor=kt(this.options.preprocessors),this.postprocessor=kt(this.options.postprocessors),this.teardowns=this.options.plugins.map(e=>e(this.element,this.options)),this.updateHistory(this.elementState),this.eventListener.listen("keydown",e=>{if(Po(e))return e.preventDefault(),this.redo();if(Eo(e))return e.preventDefault(),this.undo()}),this.eventListener.listen("beforeinput",e=>{var n;let o=e.inputType.includes("Forward");switch(this.updateHistory(this.elementState),e.inputType){case"historyUndo":return e.preventDefault(),this.undo();case"historyRedo":return e.preventDefault(),this.redo();case"deleteByCut":case"deleteContentBackward":case"deleteContentForward":return this.handleDelete({event:e,isForward:o,selection:Ro(this.elementState,o)});case"deleteWordForward":case"deleteWordBackward":return this.handleDelete({event:e,isForward:o,selection:Vo(this.elementState,o),force:!0});case"deleteSoftLineBackward":case"deleteSoftLineForward":case"deleteHardLineBackward":case"deleteHardLineForward":return this.handleDelete({event:e,isForward:o,selection:ko(this.elementState,o),force:!0});case"insertCompositionText":return;case"insertReplacementText":return;case"insertLineBreak":case"insertParagraph":return this.handleEnter(e);case"insertFromPaste":case"insertText":case"insertFromDrop":default:return this.handleInsert(e,e.data||((n=e.dataTransfer)===null||n===void 0?void 0:n.getData("text/plain"))||"")}}),this.eventListener.listen("input",({inputType:e})=>{e!=="insertCompositionText"&&(this.ensureValueFitsMask(),this.updateHistory(this.elementState))}),this.eventListener.listen("compositionend",()=>{this.ensureValueFitsMask(),this.updateHistory(this.elementState)})}get elementState(){let{value:t,selectionStart:r,selectionEnd:e}=this.element;return{value:t,selection:[r||0,e||0]}}get maxLength(){let{maxLength:t}=this.element;return t===-1?1/0:t}destroy(){this.eventListener.destroy(),this.teardowns.forEach(t=>t?.())}updateElementState({value:t,selection:r},e={inputType:"insertText",data:null}){let n=this.elementState.value;this.updateValue(t),this.updateSelectionRange(r),n!==t&&this.dispatchInputEvent(e)}updateSelectionRange([t,r]){var e;let{element:n}=this;n.matches(":focus")&&(n.selectionStart!==t||n.selectionEnd!==r)&&((e=n.setSelectionRange)===null||e===void 0||e.call(n,t,r))}updateValue(t){this.element.value=t}ensureValueFitsMask(){this.updateElementState(At(this.elementState,this.options))}dispatchInputEvent(t={inputType:"insertText",data:null}){globalThis.InputEvent&&this.element.dispatchEvent(new InputEvent("input",Object.assign(Object.assign({},t),{bubbles:!0,cancelable:!1})))}handleDelete({event:t,selection:r,isForward:e,force:n=!1}){let o={value:this.elementState.value,selection:r},[a,s]=o.selection,{elementState:l}=this.preprocessor({elementState:o,data:""},e?"deleteForward":"deleteBackward"),c=new Ge(l,this.options),[g,v]=l.selection;c.deleteCharacters([g,v]);let C=this.postprocessor(c,o);if(!(o.value.slice(0,a)+o.value.slice(s)===C.value&&!n&&!this.element.isContentEditable)){if(t.preventDefault(),Io(o,l,c,C))return this.updateSelectionRange(e?[v,v]:[g,g]);this.updateElementState(C,{inputType:t.inputType,data:null}),this.updateHistory(C)}}handleInsert(t,r){let e=this.elementState,{elementState:n,data:o=r}=this.preprocessor({data:r,elementState:e},"insert"),a=new Ge(n,this.options);try{a.addCharacters(n.selection,o)}catch{return t.preventDefault()}let[s,l]=n.selection,c=e.value.slice(0,s)+r+e.value.slice(l),g=this.postprocessor(a,e);if(g.value.length>this.maxLength)return t.preventDefault();(c!==g.value||this.element.isContentEditable)&&(t.preventDefault(),this.updateElementState(g,{data:r,inputType:t.inputType}),this.updateHistory(g))}handleEnter(t){(this.isTextArea||this.element.isContentEditable)&&this.handleInsert(t,`
`)}};var Vt=(()=>{let t=class t{constructor(){this.elementRef=h(ve).nativeElement,this.ngZone=h(En),this.maskedElement=null,this.options=null,this.elementPredicate=pr;let e=h(Yn,{self:!0,optional:!0});if(e){let n=e.writeValue.bind(e);e.writeValue=o=>{n(this.options?At(String(o??""),this.options):o)}}}ngOnChanges(){return Cn(this,null,function*(){let{elementPredicate:e,options:n}=this;if(this.maskedElement?.destroy(),!n)return;let o=yield e(this.elementRef);this.elementPredicate===e&&this.ngZone.runOutsideAngular(()=>{this.maskedElement=new Rt(o,n)})})}ngOnDestroy(){this.maskedElement?.destroy()}};t.\u0275fac=function(n){return new(n||t)},t.\u0275dir=M({type:t,selectors:[["","maskito",""]],inputs:{options:[0,"maskito","options"],elementPredicate:[0,"maskitoElement","elementPredicate"]},standalone:!0,features:[Pn]});let i=t;return i})();function No(i,t,r){let e=Math.min(Number(r),Math.max(Number(t),Number(i)));return i instanceof Date?new Date(e):e}function Lo(i){return i.replaceAll(/\W/g,"").length}var yr=i=>{var t,r,e;return{day:((t=i.match(/d/g))===null||t===void 0?void 0:t.length)||0,month:((r=i.match(/m/g))===null||r===void 0?void 0:r.length)||0,year:((e=i.match(/y/g))===null||e===void 0?void 0:e.length)||0}};function Ho(i){return{day:String(i.getDate()).padStart(2,"0"),month:String(i.getMonth()+1).padStart(2,"0"),year:String(i.getFullYear()).padStart(4,"0"),hours:String(i.getHours()).padStart(2,"0"),minutes:String(i.getMinutes()).padStart(2,"0"),seconds:String(i.getSeconds()).padStart(2,"0"),milliseconds:String(i.getMilliseconds()).padStart(3,"0")}}function $o(i,t){return i.length<t.length?!1:i.split(/\D/).every(r=>!r.match(/^0+$/))}function xr(i,t,r){let e=Lo(t);return i.replace(r,"").match(new RegExp(`(\\D*\\d[^\\d\\s]*){1,${e}}`,"g"))||[]}function pn(i,t){let r=t.replaceAll(/[^dmy]/g,""),e=i.replaceAll(/\D+/g,""),n={day:e.slice(r.indexOf("d"),r.lastIndexOf("d")+1),month:e.slice(r.indexOf("m"),r.lastIndexOf("m")+1),year:e.slice(r.indexOf("y"),r.lastIndexOf("y")+1)};return Object.fromEntries(Object.entries(n).filter(([o,a])=>!!a).sort(([o],[a])=>t.toLowerCase().indexOf(o[0])>t.toLowerCase().indexOf(a[0])?1:-1))}function jo(i,t){var r,e,n,o,a,s,l;let c=((r=i.year)===null||r===void 0?void 0:r.length)===2?`20${i.year}`:i.year,g=new Date(Number(c??"0"),Number((e=i.month)!==null&&e!==void 0?e:"1")-1,Number((n=i.day)!==null&&n!==void 0?n:"1"),Number((o=t?.hours)!==null&&o!==void 0?o:"0"),Number((a=t?.minutes)!==null&&a!==void 0?a:"0"),Number((s=t?.seconds)!==null&&s!==void 0?s:"0"),Number((l=t?.milliseconds)!==null&&l!==void 0?l:"0"));return g.setFullYear(Number(c??"0")),g}var br=", ";function Xe({day:i,month:t,year:r,hours:e,minutes:n,seconds:o,milliseconds:a},{dateMode:s,dateTimeSeparator:l=br,timeMode:c}){var g;let v=((g=s.match(/y/g))===null||g===void 0?void 0:g.length)===2?r?.slice(-2):r;return(s+(c?l+c:"")).replaceAll(/d+/g,i??"").replaceAll(/m+/g,t??"").replaceAll(/y+/g,v??"").replaceAll(/H+/g,e??"").replaceAll("MSS",a??"").replaceAll(/M+/g,n??"").replaceAll(/S+/g,o??"").replaceAll(/^\D+/g,"").replaceAll(/\D+$/g,"")}var Tr={day:31,month:12,year:9999};var Bo=new Date("0001-01-01"),Uo=new Date("9999-12-31"),Wo={hours:23,minutes:59,seconds:59,milliseconds:999},mn=[":","."],wr={hours:2,minutes:2,seconds:2,milliseconds:3};var Yo=":",zo="\uFF1A";function Go({dateString:i,dateModeTemplate:t,dateSegmentsSeparator:r,offset:e,selection:[n,o]}){let a=pn(i,t),s=Object.entries(a),l={};for(let[v,C]of s){let I=Xe(l,{dateMode:t}),R=Tr[v],B=I.length&&r.length,F=e+I.length+B+yr(t)[v],X=F>=n&&F===o;if(X&&Number(C)>Number(R))return{validatedDateString:"",updatedSelection:[n,o]};if(X&&Number(C)<1)return{validatedDateString:"",updatedSelection:[n,o]};l[v]=C}let c=Xe(l,{dateMode:t}),g=c.length-i.length;return{validatedDateString:c,updatedSelection:[n+g,o+g]}}var Ir=/[\\^$.*+?()[\]{}|]/g,Xo=new RegExp(Ir.source);function fn(i){return i&&Xo.test(i)?i.replaceAll(Ir,"\\$&"):i}function Lt(i,t,r=0){return Number(i.padEnd(t.length,"0"))<=Number(t)?{validatedSegmentValue:i,prefixedZeroesCount:r}:i.endsWith("0")?Lt(`0${i.slice(0,t.length-1)}`,t,r+1):Lt(`${i.slice(0,t.length-1)}0`,t,r)}function gr(i){return i.replaceAll(new RegExp(zo,"g"),Yo)}function _r(i){return i.replaceAll(/[０-９]/g,t=>String.fromCharCode(t.charCodeAt(0)-65248))}function Zo(){return({elementState:i,data:t})=>{let{value:r,selection:e}=i;return{elementState:{selection:e,value:gr(r)},data:gr(t)}}}function Ko({dateModeTemplate:i,dateSegmentSeparator:t,splitFn:r,uniteFn:e}){return({value:n,selection:o})=>{var a;let[s,l]=o,{dateStrings:c,restPart:g=""}=r(n),v=[],C=0;c.forEach(R=>{let B=pn(R,i),X=Object.entries(B).reduce((oe,[zt,Gt])=>{let{validatedSegmentValue:Xt,prefixedZeroesCount:Xr}=Lt(Gt,`${Tr[zt]}`);return C+=Xr,Object.assign(Object.assign({},oe),{[zt]:Xt})},{});v.push(Xe(X,{dateMode:i}))});let I=e(v,n)+(!((a=c[c.length-1])===null||a===void 0)&&a.endsWith(t)?t:"")+g;return C&&I.slice(l+C,l+C+t.length)===t&&(C+=t.length),{selection:[s+C,l+C],value:I}}}function Or(){return({elementState:i,data:t})=>{let{value:r,selection:e}=i;return{elementState:{selection:e,value:_r(r)},data:_r(t)}}}function qo(i,t){let r=yr(t);return Object.fromEntries(Object.entries(i).map(([e,n])=>{let o=r[e];return[e,n.length===o&&n.match(/^0+$/)?"1".padStart(o,"0"):n]}))}function Qo({dateModeTemplate:i,min:t=Bo,max:r=Uo,rangeSeparator:e="",dateSegmentSeparator:n="."}){return({value:o,selection:a})=>{let s=e&&o.endsWith(e),l=xr(o,i,e),c="";for(let g of l){c+=c?e:"";let v=pn(g,i);if(!$o(g,i)){let R=qo(v,i),B=Xe(R,{dateMode:i}),F=g.endsWith(n)?n:"";c+=B+F;continue}let C=jo(v),I=No(C,t,r);c+=Xe(Ho(I),{dateMode:i})}return{selection:a,value:c+(s?e:"")}}}function Jo({dateModeTemplate:i,dateSegmentsSeparator:t,rangeSeparator:r="",dateTimeSeparator:e=br}){return({elementState:n,data:o})=>{let a=r?new RegExp(`${r}|-`):e,s=o.split(a),l=o.includes(e)?[s[0]]:s;if(l.every(c=>c.trim().split(/\D/).filter(Boolean).length===i.split(t).length)){let c=l.map(g=>ea(g,i,t)).join(r);return{elementState:n,data:`${c}${o.includes(e)&&e+s[1]||""}`}}return{elementState:n,data:o}}}function ea(i,t,r){let e=i.split(/\D/).filter(Boolean),n=t.split(r);return e.map((a,s)=>s===n.length-1?a:a.padStart(n[s].length,"0")).join(r)}function ta({dateModeTemplate:i,dateSegmentsSeparator:t,rangeSeparator:r=""}){return({elementState:e,data:n})=>{let{value:o,selection:a}=e;if(n===t)return{elementState:e,data:a[0]===o.length?n:""};let s=n.replaceAll(new RegExp(`[^\\d${fn(t)}${r}]`,"g"),"");if(!s)return{elementState:e,data:""};let[l,c]=a,g=c+n.length,v=o.slice(0,l)+s+o.slice(g),C=xr(v,i,r),I="",R=!!r&&v.includes(r);for(let F of C){let{validatedDateString:X,updatedSelection:oe}=Go({dateString:F,dateModeTemplate:i,dateSegmentsSeparator:t,offset:I.length,selection:[l,g]});if(F&&!X)return{elementState:e,data:""};g=oe[1],I+=R&&!I?X+r:X}let B=I.slice(l,g);return{elementState:{selection:a,value:I.slice(0,l)+B.split(t).map(F=>"0".repeat(F.length)).join(t)+I.slice(g)},data:B}}}var na=()=>{};function ia({step:i,fullMode:t,timeSegmentMaxValues:r}){let e=ra(t);return i<=0?na:n=>{let o=a=>{if(a.key!=="ArrowUp"&&a.key!=="ArrowDown")return;a.preventDefault();let s=n.selectionStart||0,l=oa({segmentsIndexes:e,selectionStart:s});if(!l)return;let c=aa({selection:e.get(l),value:n.value,toAdd:a.key==="ArrowUp"?i:-i,max:r[l]});fr(n,{value:c,selection:[s,s]})};return n.addEventListener("keydown",o),()=>n.removeEventListener("keydown",o)}}function ra(i){return new Map([["hours",Nt(i,"HH")],["minutes",Nt(i,"MM")],["seconds",Nt(i,"SS")],["milliseconds",Nt(i,"MSS")]])}function Nt(i,t){let r=i.indexOf(t);return r===-1?[-1,-1]:[r,r+t.length]}function oa({segmentsIndexes:i,selectionStart:t}){for(let[r,e]of i.entries()){let[n,o]=e;if(n<=t&&t<=o)return r}return null}function aa({selection:i,value:t,toAdd:r,max:e}){let[n,o]=i,a=Number(t.slice(n,o).padEnd(o-n,"0")),s=sa(a+r,e+1);return t.slice(0,n)+String(s).padStart(o-n,"0")+t.slice(o,t.length)}function sa(i,t){return i<0&&(i+=Math.floor(Math.abs(i)/t+1)*t),i%t}function Sr(){return({elementState:i},t)=>{let{value:r,selection:e}=i;if(!r||la(r,e))return{elementState:i};let[n,o]=e,a=r.slice(n,o).replaceAll(/\d/g,"0"),s=r.slice(0,n)+a+r.slice(o);return t==="validation"||t==="insert"&&n===o?{elementState:{selection:e,value:s}}:{elementState:{selection:t==="deleteBackward"||t==="insert"?[n,n]:[o,o],value:s}}}}function la(i,[t,r]){return r===i.length}function Mr({mode:i,separator:t=".",max:r,min:e}){let n=i.split("/").join(t);return Object.assign(Object.assign({},he),{mask:Array.from(n).map(o=>t.includes(o)?o:/\d/),overwriteMode:"replace",preprocessors:[Or(),Sr(),Jo({dateModeTemplate:n,dateSegmentsSeparator:t}),ta({dateModeTemplate:n,dateSegmentsSeparator:t})],postprocessors:[Ko({dateModeTemplate:n,dateSegmentSeparator:t,splitFn:o=>({dateStrings:[o]}),uniteFn:([o])=>o}),Qo({min:e,max:r,dateModeTemplate:n,dateSegmentSeparator:t})]})}function ca(i){return Object.fromEntries(Object.entries(i).map(([t,r])=>[t,`${r}`.padEnd(wr[t],"0")]))}var ua={HH:"hours",MM:"minutes",SS:"seconds",MSS:"milliseconds"};function da(i,t){let r=i.replaceAll(/\D+/g,""),e=0;return Object.fromEntries(t.split(/\W/).map(n=>{let o=r.slice(e,e+n.length);return e+=n.length,[ua[n],o]}))}var pa=/^\D*/,ma=/\D*$/;function vr({hours:i="",minutes:t="",seconds:r="",milliseconds:e=""}){return`${i}:${t}:${r}.${e}`.replace(pa,"").replace(ma,"")}var fa=new RegExp(`[${mn.map(fn).join("")}]$`);function Cr({timeString:i,paddedMaxValues:t,offset:r,selection:[e,n],timeMode:o}){let a=da(i,o),s=Object.entries(a),l={},c=0;for(let[I,R]of s){let B=vr(l),F=t[I],X=B.length&&1,oe=r+B.length+X+wr[I];if(oe>=e&&oe<=n&&Number(R)>Number(F))return{validatedTimeString:"",updatedTimeSelection:[e,n]};let{validatedSegmentValue:Gt,prefixedZeroesCount:Xt}=Lt(R,`${F}`);c+=Xt,l[I]=Gt}let[g=""]=i.match(fa)||[],v=vr(l)+g,C=Math.max(v.length-i.length,0);return{validatedTimeString:v,updatedTimeSelection:[e+c+C,n+c+C]}}function ha(i,t){let r=ca(i),e=new RegExp(`[^\\d${mn.map(fn).join("")}]+`);return({elementState:n,data:o},a)=>{if(a==="deleteBackward"||a==="deleteForward")return{elementState:n,data:o};let{value:s,selection:l}=n;if(a==="validation"){let{validatedTimeString:X,updatedTimeSelection:oe}=Cr({timeString:s,paddedMaxValues:r,offset:0,selection:l,timeMode:t});return{elementState:{value:X,selection:oe},data:o}}let c=o.replace(e,""),[g,v]=l,C=v+c.length,I=s.slice(0,g)+c+s.slice(C),{validatedTimeString:R,updatedTimeSelection:B}=Cr({timeString:I,paddedMaxValues:r,offset:0,selection:[g,C],timeMode:t});if(I&&!R)return{elementState:n,data:""};C=B[1];let F=R.slice(g,C);return{elementState:{selection:l,value:R.slice(0,g)+"0".repeat(F.length)+R.slice(C)},data:F}}}function Dr({mode:i,timeSegmentMaxValues:t={},step:r=0}){let e=Object.assign(Object.assign({},Wo),t);return Object.assign(Object.assign({},he),{mask:Array.from(i).map(n=>mn.includes(n)?n:/\d/),preprocessors:[Or(),Zo(),Sr(),ha(e,i)],plugins:[ia({fullMode:i,step:r,timeSegmentMaxValues:e})],overwriteMode:"replace"})}var ba=["*",[["input"]]],Ta=["*","input"],wa=i=>({$implicit:i});function Ia(i,t){if(i&1){let r=O();m(0,"tui-primitive-textfield",5),b("focusedChange",function(n){y(r);let o=p();return x(o.onFocused(n))})("valueChange",function(n){y(r);let o=p();return x(o.onValueChange(n))}),Ce(1),Ce(2,1,["ngProjectAs","input",5,["input"]]),f()}if(i&2){let r=t.tuiLet,e=p(),n=Z(4);d("disabled",e.computedDisabled)("focusable",e.computedFocusable)("invalid",e.computedInvalid)("maskito",e.computedMask)("nativeId",e.nativeId)("pseudoFocus",e.pseudoFocus)("pseudoHover",e.pseudoHover)("readOnly",e.readOnly)("tuiTextfieldFiller",e.getComputedFiller(r||""))("tuiTextfieldIcon",e.calendarIcon&&n)("value",e.computedValue)}}function Oa(i,t){if(i&1){let r=O();m(0,"tui-icon",8),b("click",function(){y(r);let n=p(2);return x(n.onIconClick())}),f()}if(i&2){let r=t.polymorpheusOutlet,e=p(2);A("t-icon_small",e.size==="s")("t-icon",!e.computedDisabled),d("icon",r.toString())}}function Sa(i,t){i&1&&k(0,"input",9)}function Ma(i,t){if(i&1&&_(0,Oa,1,5,"tui-icon",6)(1,Sa,1,0,"input",7),i&2){let r=p();d("polymorpheusOutlet",r.calendarIcon)("polymorpheusOutletContext",Je(3,wa,r.size)),u(),d("ngIf",r.nativePicker)}}function Da(i,t){if(i&1){let r=O();m(0,"div",12),b("mousedown.prevent.silent",function(){return y(r),x(0)}),m(1,"button",13),b("click",function(){y(r);let n=p(2);return x(n.onDayClick(n.items[0].day))}),T(2),f()()}if(i&2){let r=p(2);u(2),D(" ",r.items[0]," ")}}function Pa(i,t){if(i&1){let r=O();m(0,"tui-calendar",10),b("dayClick",function(n){y(r);let o=p();return x(o.onDayClick(n))})("monthChange",function(n){y(r);let o=p();return x(o.onMonthChange(n))})("mousedown.prevent.silent",function(){return y(r),x(0)}),f(),_(1,Da,3,1,"div",11)}if(i&2){let r=p();d("disabledItemHandler",r.disabledItemHandler)("markerHandler",r.markerHandler)("max",r.computedMax)("min",r.computedMin)("month",r.computedActiveYearMonth)("value",r.value),u(),d("ngIf",r.items.length===1)}}var hn=(()=>{let t=class t extends _t{get value(){return this.host.computedValue}get max(){return this.host.computedMax}get min(){return this.host.computedMin}get format(){return this.host.dateFormat}onValueChange(e){e||(this.host.nativeValue=""),this.host.onValueChange(e)}process(e){e.inputMode="numeric"}};t.\u0275fac=(()=>{let e;return function(o){return(e||(e=Ie(t)))(o||t)}})(),t.\u0275dir=M({type:t,selectors:[["tui-input-date",3,"multiple",""]],features:[U([Ue(t)]),te]});let i=t;return i})(),Ea=(()=>{let t=class t{constructor(){this.host=h(ht)}get value(){return this.host.value.length===tn?Q.normalizeParse(this.host.value,this.host.format.mode).toString("YMD","-"):""}get max(){return this.host.max.toJSON()}get min(){return this.host.min.toJSON()}onChange(e){this.host.onValueChange(e?Q.normalizeParse(e,"YMD").toString(this.host.format.mode):"")}};t.\u0275fac=function(n){return new(n||t)},t.\u0275dir=M({type:t,selectors:[["input","tuiDate",""]],hostAttrs:["type","date"],hostVars:4,hostBindings:function(n,o){n&1&&b("change",function(s){return o.onChange(s.target.value)})("click.stop.silent",function(){return 0})("input.stop.silent",function(){return 0})("mousedown.stop.silent",function(){return 0}),n&2&&qe("tabIndex",-1)("value",o.value)("max",o.max)("min",o.min)},features:[U([Ue(hn)])]});let i=t;return i})(),Pr=(()=>{let t=class t extends vt{constructor(){super(...arguments),this.options=h(Bi),this.textfieldSize=h(bt),this.mobileCalendar=h(Ui,{optional:!0}),this.month=null,this.min=this.options.min,this.max=this.options.max,this.disabledItemHandler=J,this.markerHandler=null,this.items=[],this.defaultActiveYearMonth=de.currentLocal(),this.dateFormat=mi,this.open=!1,this.dateTexts$=h(ji),this.valueTransformer=h(an,{optional:!0}),this.isMobile=h(Ee),this.filler$=this.dateTexts$.pipe(S(e=>Jn(e[this.dateFormat.mode],this.dateFormat.separator))),this.dateFormat$=h(fi).pipe(pi(this.cdr),nt()).subscribe(e=>{this.dateFormat=e})}get computedMin(){return this.min??this.options.min}get computedMax(){return this.max??this.options.max}get nativeFocusableElement(){return this.textfield?.nativeFocusableElement??null}get focused(){return!!this.textfield?.focused}get nativeValue(){return this.nativeFocusableElement?.value||""}set nativeValue(e){this.nativeFocusableElement&&(this.nativeFocusableElement.value=e)}get computedValue(){let{value:e,nativeValue:n,activeItem:o}=this;return o?String(o):e?e.toString(this.dateFormat.mode,this.dateFormat.separator):n}onValueChange(e){this.control&&this.control.updateValueAndValidity({emitEvent:!1}),!e&&!this.mobileCalendar&&this.onOpenChange(!0),this.value=e.length!==tn?null:Q.normalizeParse(e,this.dateFormat.mode)}setDisabledState(){super.setDisabledState(),this.open=!1}writeValue(e){super.writeValue(e),this.nativeValue=e?this.computedValue:""}get size(){return this.textfieldSize.size}get nativePicker(){return this.options.nativePicker&&this.isMobile}get calendarIcon(){return this.options.icon}get computedActiveYearMonth(){return this.items[0]&&this.value?.daySame(this.items[0].day)?this.items[0].displayDay:this.month||this.value||si(this.defaultActiveYearMonth,this.computedMin,this.computedMax)}get computedMask(){return this.activeItem?he:this.computeMaskOptions(this.dateFormat.mode,this.dateFormat.separator,this.computedMin,this.computedMax)}get activeItem(){let{value:e}=this;return e&&this.items.find(n=>n.day.daySame(e))||null}onClick(){!this.isMobile&&this.interactive&&(this.open=!this.open)}getComputedFiller(e){return this.activeItem?"":e}onIconClick(){this.isMobile&&this.interactive&&(this.open=!0)}onDayClick(e){this.value=e,this.open=!1}onMonthChange(e){this.month=e}onOpenChange(e){this.open=e}onFocused(e){this.updateFocused(e)}valueIdenticalComparator(e,n){return Ne(e,n,(o,a)=>o.daySame(a))}computeMaskOptions(e,n,o,a){return Mr({separator:n,mode:Yi[e],min:o.toLocalNativeDate(),max:a.toLocalNativeDate()})}};t.\u0275fac=(()=>{let e;return function(o){return(e||(e=Ie(t)))(o||t)}})(),t.\u0275cmp=P({type:t,selectors:[["tui-input-date",3,"multiple",""]],viewQuery:function(n,o){if(n&1&&Qe(fe,5),n&2){let a;Se(a=Me())&&(o.textfield=a.first)}},hostVars:1,hostBindings:function(n,o){n&1&&b("click",function(){return o.onClick()}),n&2&&ie("data-size",o.size)},inputs:{min:"min",max:"max",disabledItemHandler:"disabledItemHandler",markerHandler:"markerHandler",items:"items",defaultActiveYearMonth:"defaultActiveYearMonth"},features:[U([ft(t),Di(t),gt(t),Li(an),Wi]),te],ngContentSelectors:Ta,decls:7,vars:7,consts:[["iconContent",""],["dropdown","polymorpheus"],["tuiDropdownOpenMonitor","",1,"t-hosted",3,"tuiDropdownOpenChange","tuiDropdown","tuiDropdownEnabled","tuiDropdownOpen"],["automation-id","tui-input-date-range__textfield","tuiValueAccessor","","class","t-textfield",3,"disabled","focusable","invalid","maskito","nativeId","pseudoFocus","pseudoHover","readOnly","tuiTextfieldFiller","tuiTextfieldIcon","value","focusedChange","valueChange",4,"tuiLet"],[3,"polymorpheus"],["automation-id","tui-input-date-range__textfield","tuiValueAccessor","",1,"t-textfield",3,"focusedChange","valueChange","disabled","focusable","invalid","maskito","nativeId","pseudoFocus","pseudoHover","readOnly","tuiTextfieldFiller","tuiTextfieldIcon","value"],["automation-id","tui-input-date-range__icon","tuiAppearance","icon",3,"t-icon_small","t-icon","icon","click",4,"polymorpheusOutlet","polymorpheusOutletContext"],["tuiDate","","class","t-native-input",4,"ngIf"],["automation-id","tui-input-date-range__icon","tuiAppearance","icon",3,"click","icon"],["tuiDate","",1,"t-native-input"],["automation-id","tui-input-date__calendar",3,"dayClick","monthChange","mousedown.prevent.silent","disabledItemHandler","markerHandler","max","min","month","value"],["class","t-button",3,"mousedown.prevent.silent",4,"ngIf"],[1,"t-button",3,"mousedown.prevent.silent"],["tuiLink","","type","button",3,"click"]],template:function(n,o){if(n&1){let a=O();Oe(ba),m(0,"div",2),b("tuiDropdownOpenChange",function(l){return y(a),x(o.onOpenChange(l))}),_(1,Ia,3,11,"tui-primitive-textfield",3),w(2,"async"),_(3,Ma,2,5,"ng-template",null,0,K)(5,Pa,2,7,"ng-template",4,1,K),f()}if(n&2){let a=Z(6);d("tuiDropdown",a)("tuiDropdownEnabled",o.interactive&&!o.nativePicker)("tuiDropdownOpen",o.open),u(),d("tuiLet",E(2,5,o.filler$)),u(4),d("polymorpheus",o.type)}},dependencies:[V,Vt,ct,xi,Pt,lt,fe,Ot,wt,ye,xt,yt,Ct,ot,me,ut,pt,Ea,W],styles:["[_nghost-%COMP%]{display:block;border-radius:var(--tui-radius-m);text-align:left}.t-hosted[_ngcontent-%COMP%]{display:block;border-radius:inherit}.t-textfield[_ngcontent-%COMP%]{border-radius:inherit;text-align:inherit}.t-icon[_ngcontent-%COMP%]{pointer-events:auto}.t-icon_small[_ngcontent-%COMP%]{border:.25rem solid transparent}.t-button[_ngcontent-%COMP%]{display:flex;height:2.75rem;justify-content:center;box-shadow:inset 0 1px var(--tui-border-normal)}.t-button[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex:1;text-align:center}.t-native-input[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;opacity:0;pointer-events:auto;font-size:2rem}"],changeDetection:0});let i=t;return Te([ce],i.prototype,"computeMaskOptions",null),i})(),Ht=(()=>{let t=class t{};t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=Ae({type:t}),t.\u0275inj=Re({imports:[q,Pt,St,It,Tt,me,dt]});let i=t;return i})();function Er(i,t,r,e){var n=arguments.length,o=n<3?t:e===null?e=Object.getOwnPropertyDescriptor(t,r):e,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,r,e);else for(var s=i.length-1;s>=0;s--)(a=i[s])&&(o=(n<3?a(o):n>3?a(t,r,o):a(t,r))||o);return n>3&&o&&Object.defineProperty(t,r,o),o}var Ra=["tuiTime",""];function Fa(i,t){if(i&1&&k(0,"option",3),i&2){let r=t.$implicit;An("value",r)}}function Aa(i,t){if(i&1&&(m(0,"datalist",1),_(1,Fa,1,1,"option",2),f()),i&2){let r=p();d("id",r.autoIdString),u(),d("ngForOf",r.items)}}var Va=["*"],Na=i=>({$implicit:i});function La(i,t){if(i&1&&(m(0,"button",7),T(1),f()),i&2){let r=t.$implicit,e=p(2);d("disabled",e.disabledItemHandler(r))("value",r),u(),D(" ",r," ")}}function Ha(i,t){if(i&1&&(m(0,"tui-data-list",5),_(1,La,2,3,"button",6),f()),i&2){let r=p();d("size",r.itemSize),u(),d("ngForOf",r.filtered)}}function $a(i,t){if(i&1&&k(0,"tui-icon",10),i&2){let r=t.polymorpheusOutlet,e=p(2);A("t-icon_small",e.size==="s"),d("icon",r.toString())}}function ja(i,t){i&1&&k(0,"input",11)}function Ba(i,t){if(i&1&&_(0,$a,1,3,"tui-icon",8)(1,ja,1,0,"input",9),i&2){let r=p();d("polymorpheusOutlet",r.icon)("polymorpheusOutletContext",Je(3,Na,r.size)),u(),d("ngIf",r.showNativePicker)}}var Ua={HH:23,MM:59,SS:59,MS:999},Wa={icon:()=>"@tui.clock",mode:"HH:MM",maxValues:Ua,itemSize:"m",nativePicker:!1},Ya=rt(Wa);var za=(()=>{let t=class t{constructor(){this.host=h(ht),this.autoIdString=h(wi).generate()}get items(){return this.host.items.map(e=>e.toString(this.host.mode))}get value(){return this.host.value.length===this.host.mode.length?this.host.value:""}get step(){switch(this.host.mode){case"HH:MM:SS":return 1;case"HH:MM:SS.MSS":return .001;default:return 60}}onChange(e){this.host.onValueChange(e)}};t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=P({type:t,selectors:[["input","tuiTime",""]],hostAttrs:["type","time"],hostVars:4,hostBindings:function(n,o){n&1&&b("change.stop",function(s){return o.onChange(s.target.value)})("click.stop.silent",function(){return 0})("mousedown.stop.silent",function(){return 0}),n&2&&(qe("tabIndex",-1)("value",o.value)("step",o.step),ie("list",o.autoIdString))},attrs:Ra,decls:1,vars:1,consts:[[3,"id",4,"ngIf"],[3,"id"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(n,o){n&1&&_(0,Aa,2,2,"datalist",0),n&2&&d("ngIf",o.items.length)},dependencies:[G,V],styles:["[_nghost-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;opacity:0;pointer-events:auto;font-size:2rem}"],changeDetection:0});let i=t;return i})(),kr=(()=>{let t=class t extends vt{constructor(){super(...arguments),this.timeTexts$=h($i),this.options=h(Ya),this.isMobile=h(Ee),this.isIOS=h(Ti),this.textfieldSize=h(bt),this.valueTransformer=h(Hi,{optional:!0}),this.open=!1,this.disabledItemHandler=J,this.items=[],this.itemSize=this.options.itemSize,this.strict=!1,this.mode=this.options.mode,this.identityMatcher=(e,n)=>e instanceof $e&&e.valueOf()===n.valueOf()}get size(){return this.textfieldSize.size}get nativeFocusableElement(){return this.textfield?.nativeFocusableElement??null}get focused(){return bi(this.nativeFocusableElement)}get computedValue(){return this.value?this.value.toString(this.mode):this.nativeValue}get nativeValue(){return this.nativeFocusableElement?.value||""}set nativeValue(e){this.nativeFocusableElement&&(this.nativeFocusableElement.value=e)}checkOption(e){e.valueOf()===this.value?.valueOf()&&(this.value=e)}handleOption(e){this.focusInput(),this.value=e}writeValue(e){super.writeValue(e),this.nativeValue=e?this.computedValue:""}onValueChange(e){this.open=!!this.items.length,this.control&&this.control.updateValueAndValidity({emitEvent:!1});let n=this.getMatch(e);if(n!==void 0){this.value=n;return}if(e.length!==this.mode.length){this.value=null;return}let o=$e.fromString(e);this.value=this.strict?this.findNearestTimeFromItems(o):o}get canOpen(){return this.interactive&&!!this.filtered.length}get filtered(){return this.filter(this.items,this.mode,this.computedSearch)}get showNativePicker(){return this.nativePicker&&(!this.isIOS||this.mode==="HH:MM"&&!this.items.length)}get nativeDatalist(){return this.nativePicker&&!this.isIOS}get maskOptions(){return this.calculateMask(this.mode)}get computedSearch(){return this.computedValue.length!==this.mode.length?this.computedValue:""}get innerPseudoFocused(){return this.pseudoFocus===!1?!1:this.open&&this.canOpen||this.computedFocused?!0:null}get icon(){return this.options.icon}getFiller$(e){return this.timeTexts$.pipe(S(n=>n[e]))}onClick(){this.open=!this.open}onFocused(e){this.updateFocused(e),!(e||this.value!==null||this.nativeValue==="")&&(this.value=$e.fromString(this.nativeValue),bn(0).pipe(nt(this.destroyRef)).subscribe(()=>{(this.nativeValue.endsWith(".")||this.nativeValue.endsWith(":"))&&(this.nativeValue=this.nativeValue.slice(0,-1))}))}onArrowUp(e){this.items.length||this.processArrow(e,1)}onArrowDown(e){this.items.length||this.processArrow(e,-1)}onOpen(e){this.open=e}get nativePicker(){return!!this.options.nativePicker&&this.isMobile}calculateMask(e){let{HH:n,MM:o,SS:a,MS:s}=this.options.maxValues;return Dr({mode:e,timeSegmentMaxValues:{hours:n,minutes:o,seconds:a,milliseconds:s}})}filter(e,n,o){return e.filter(a=>a.toString(n).includes(o))}findNearestTimeFromItems(e){return this.items.reduce((n,o)=>Math.abs(o.valueOf()-e.valueOf())<Math.abs(n.valueOf()-e.valueOf())?o:n,new $e(0,0))}getMatch(e){return this.items.find(n=>ai(n,e))}close(){this.open=!1}processArrow(e,n){let{target:o}=e;if(this.readOnly||!ri(o)||!ii(o))return;let a=o.selectionStart||0;this.shiftTime(this.calculateShift(a,n)),o.setSelectionRange(a,a),e.preventDefault()}calculateShift(e,n){return e<=2?{hours:n}:e<=5?{minutes:n}:e<=8?{seconds:n}:{ms:n}}shiftTime(e){if(this.value===null)return;let n=this.value.shift(e);this.nativeValue=n.toString(this.mode),this.value=n}focusInput(e=!1){this.nativeFocusableElement&&(this.nativeFocusableElement.focus({preventScroll:e}),this.close())}};t.\u0275fac=(()=>{let e;return function(o){return(e||(e=Ie(t)))(o||t)}})(),t.\u0275cmp=P({type:t,selectors:[["tui-input-time"]],viewQuery:function(n,o){if(n&1&&Qe(fe,5),n&2){let a;Se(a=Me())&&(o.textfield=a.first)}},hostVars:1,hostBindings:function(n,o){n&1&&b("click",function(){return o.onClick()}),n&2&&ie("data-size",o.size)},inputs:{disabledItemHandler:"disabledItemHandler",items:"items",itemSize:"itemSize",strict:"strict",mode:"mode"},features:[U([ft(t),gt(t),Ei(t),Pi(Xi)],[zi]),te],ngContentSelectors:Va,decls:9,vars:17,consts:[["dropdownContent",""],["iconContent",""],["tuiDropdownOpenMonitor","",1,"t-wrapper",3,"tuiActiveZoneChange","tuiDropdownOpenChange","tuiDropdown","tuiDropdownEnabled","tuiDropdownOpen"],["tuiValueAccessor","",1,"t-textfield",3,"keydown.arrowDown","keydown.arrowUp","valueChange","disabled","focusable","invalid","maskito","nativeId","pseudoActive","pseudoFocus","pseudoHover","readOnly","tuiTextfieldFiller","tuiTextfieldIcon","value"],["inputmode","numeric","tuiTextfieldLegacy",""],["automation-id","tui-input-time__dropdown",3,"size"],["automation-id","tui-input-time__item","tuiOption","",3,"disabled","value",4,"ngFor","ngForOf"],["automation-id","tui-input-time__item","tuiOption","",3,"disabled","value"],["tuiAppearance","icon",3,"t-icon_small","icon",4,"polymorpheusOutlet","polymorpheusOutletContext"],["tuiTime","",4,"ngIf"],["tuiAppearance","icon",3,"icon"],["tuiTime",""]],template:function(n,o){if(n&1){let a=O();Oe(),m(0,"div",2),b("tuiActiveZoneChange",function(l){return y(a),x(o.onFocused(l))})("tuiDropdownOpenChange",function(l){return y(a),x(o.onOpen(l))}),m(1,"tui-primitive-textfield",3),w(2,"async"),b("keydown.arrowDown",function(l){return y(a),x(o.onArrowDown(l))})("keydown.arrowUp",function(l){return y(a),x(o.onArrowUp(l))})("valueChange",function(l){return y(a),x(o.onValueChange(l))}),Ce(3),k(4,"input",4),f()(),_(5,Ha,2,2,"ng-template",null,0,K)(7,Ba,2,5,"ng-template",null,1,K)}if(n&2){let a=Z(6),s=Z(8);d("tuiDropdown",a)("tuiDropdownEnabled",o.canOpen&&!o.nativeDatalist)("tuiDropdownOpen",o.canOpen&&o.open),u(),d("disabled",o.disabled)("focusable",o.focusable)("invalid",o.computedInvalid)("maskito",o.maskOptions)("nativeId",o.nativeId)("pseudoActive",o.pseudoActive)("pseudoFocus",o.innerPseudoFocused)("pseudoHover",o.pseudoHover)("readOnly",o.readOnly)("tuiTextfieldFiller",E(2,15,o.getFiller$(o.mode))||"")("tuiTextfieldIcon",s)("value",o.computedValue)}},dependencies:[G,V,Vt,fe,Ot,Gi,wt,xt,yt,ct,Ct,me,ot,ut,pt,Be,je,za,W],styles:["[_nghost-%COMP%]{display:block;border-radius:var(--tui-radius-m);text-align:left}._disabled[_nghost-%COMP%]{pointer-events:none}.t-wrapper[_ngcontent-%COMP%]{display:block;border-radius:inherit}.t-textfield[_ngcontent-%COMP%]{border-radius:inherit;text-align:inherit}.t-icon_small[_ngcontent-%COMP%]{border:.25rem solid transparent}"],changeDetection:0});let i=t;return Te([ce],i.prototype,"getFiller$",null),Te([ce],i.prototype,"calculateMask",null),Te([ce],i.prototype,"filter",null),i})(),Rr=(()=>{let t=class t extends _t{get value(){return this.host.computedValue}get mode(){return this.host.mode}get items(){return this.host.items}onValueChange(e){e||(this.host.nativeValue=""),this.host.onValueChange(e)}process(e){e.inputMode="numeric"}};t.\u0275fac=(()=>{let e;return function(o){return(e||(e=Ie(t)))(o||t)}})(),t.\u0275dir=M({type:t,selectors:[["tui-input-time"]],features:[U([Ue(t)]),te]});let i=t;return i})(),Fr=(()=>{let t=class t{};t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=Ae({type:t}),t.\u0275inj=Re({imports:[q,Zi,St,It,Tt,me,dt,Be,je]});let i=t;return i})();var $t=(()=>{let t=class t{};t.\u0275fac=function(n){return new(n||t)},t.\u0275dir=M({type:t,selectors:[["","tuiItem",""]],standalone:!0});let i=t;return i})();var Ar=(()=>{let t=class t extends ae{constructor(){let e=ue(),n=h(et);super(o=>{se(Y(e,"touchstart",{passive:!0}),Y(e,"mousedown")).pipe(ke(()=>se(Y(n,"touchmove",{passive:!0}).pipe(ge(({touches:a})=>a.length<2),S(({touches:a})=>a[0])),Y(n,"mousemove"))),Ze(),S(([a,s])=>{let l=s.clientX-a.clientX,c=s.clientY-a.clientY;return[l,c]}),On(se(Y(n,"touchend"),Y(n,"mouseup"))),wn()).subscribe(o)})}};t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=we({token:t,factory:t.\u0275fac});let i=t;return i})(),Vr=(()=>{let t=class t{constructor(){this.tuiPan=h(Ar)}};t.\u0275fac=function(n){return new(n||t)},t.\u0275dir=M({type:t,selectors:[["","tuiPan",""]],outputs:{tuiPan:"tuiPan"},standalone:!0,features:[U([Ar])]});let i=t;return i})();var Xa=rt({timeout:500,threshold:30}),Nr=(()=>{let t=class t extends ae{constructor(){let e=h(et),n=ue(),{timeout:o,threshold:a}=h(Xa);super(s=>{se(Y(n,"touchstart",{passive:!0}),Y(e,"touchend")).pipe(Ze(),ge(([l,c])=>!!l.touches.length&&l.touches[0].identifier===c.changedTouches[0].identifier),S(([l,c])=>{let g=l.touches[0].clientX,v=l.touches[0].clientY,C=c.changedTouches[0].clientX,I=c.changedTouches[0].clientY,R=g-C,B=v-I,F=c.timeStamp-l.timeStamp;return(Math.abs(R)>a||Math.abs(B)>a)&&F<o?{direction:Za(R,B),events:[l,c]}:null}),ge(ti)).subscribe(s)})}};t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=we({token:t,factory:t.\u0275fac});let i=t;return i})();function Za(i,t){return Math.abs(t)>Math.abs(i)?t>0?"top":"bottom":i>0?"left":"right"}var Lr=(()=>{let t=class t{constructor(){this.tuiSwipe=h(Nr)}};t.\u0275fac=function(n){return new(n||t)},t.\u0275dir=M({type:t,selectors:[["","tuiSwipe",""]],outputs:{tuiSwipe:"tuiSwipe"},standalone:!0,features:[U([Nr])]});let i=t;return i})();var Ka=typeof IntersectionObserver<"u"?IntersectionObserver:class{root=null;rootMargin="";thresholds=[];observe(){}unobserve(){}disconnect(){}takeRecords(){return[]}},qa=new Fe("[WA_INTERSECTION_ROOT]"),$r=qa,Qa="0px 0px 0px 0px",jr=Qa,mu=new Fe("[WA_INTERSECTION_ROOT_MARGIN]",{providedIn:"root",factory:()=>jr});function Ja(){return h(ve).nativeElement.getAttribute("waIntersectionRootMargin")||jr}var es=0,Br=es,fu=new Fe("[WA_INTERSECTION_THRESHOLD]",{providedIn:"root",factory:()=>Br});function ts(){return h(ve).nativeElement.getAttribute("waIntersectionThreshold")?.split(",").map(parseFloat)||Br}var gn=(()=>{class i extends Ka{callbacks=new Map;margin="";threshold="";constructor(){let r=h($r,{optional:!0});super(e=>{this.callbacks.forEach((n,o)=>{let a=e.filter(({target:s})=>s===o);return a.length&&n(a,this)})},{root:r?.nativeElement,rootMargin:Ja(),threshold:ts()})}observe(r,e=()=>{}){super.observe(r),this.callbacks.set(r,e)}unobserve(r){super.unobserve(r),this.callbacks.delete(r)}ngOnDestroy(){this.disconnect()}static \u0275fac=function(e){return new(e||i)};static \u0275dir=M({type:i,selectors:[["","waIntersectionObserver",""]],inputs:{waIntersectionRootMargin:[0,"margin","waIntersectionRootMargin"],waIntersectionThreshold:[0,"threshold","waIntersectionThreshold"]},exportAs:["IntersectionObserver"],standalone:!0,features:[te]})}return i})();var Hr=(()=>{class i extends ae{constructor(){let r=h(ve).nativeElement,e=h(gn);return super(n=>(e.observe(r,o=>{n.next(o)}),()=>{e.unobserve(r)})),this.pipe(In())}static \u0275fac=function(e){return new(e||i)};static \u0275prov=we({token:i,factory:i.\u0275fac})}return i})(),Ur=(()=>{class i{waIntersectionObservee=h(Hr);static \u0275fac=function(e){return new(e||i)};static \u0275dir=M({type:i,selectors:[["","waIntersectionObservee",""]],outputs:{waIntersectionObservee:"waIntersectionObservee"},standalone:!0,features:[U([Hr])]})}return i})();var Wr=(()=>{class i{static \u0275fac=function(e){return new(e||i)};static \u0275dir=M({type:i,selectors:[["","waIntersectionRoot",""]],standalone:!0,features:[U([{provide:$r,useExisting:ve}])]})}return i})();var hu=new Fe("[WA_INTERSECTION_OBSERVER_SUPPORT]: [INTERSECTION_OBSERVER_SUPPORT]",{providedIn:"root",factory:()=>!!h(ci).IntersectionObserver});function is(i,t){i&1&&Kt(0)}function rs(i,t){if(i&1){let r=O();m(0,"fieldset",5),b("waIntersectionObservee",function(n){let o=y(r).index,a=p();return x(a.onIntersection(n[0],o))}),Kt(1,6),f()}if(i&2){let r=t.$implicit,e=t.index,n=p();d("disabled",n.isDisabled(e))("ngStyle",n.getStyle(n.itemsCount)),u(),d("ngTemplateOutlet",r)}}var _n=(()=>{let t=class t extends ae{constructor(){super(e=>this.output$.subscribe(e)),this.el=ue(),this.visible$=h(ui),this.duration$=new yn(0),this.running$=se(Y(this.el,"mouseenter").pipe(S(J)),Y(this.el,"touchstart").pipe(S(J)),Y(this.el,"touchend").pipe(S(qt)),Y(this.el,"mouseleave").pipe(S(qt)),this.visible$),this.output$=xn([this.duration$,this.running$]).pipe(di(([e])=>Tn(e),e=>e.every(Boolean)))}set duration(e){this.duration$.next(Number.isNaN(e)?this.duration$.value:e)}};t.\u0275fac=function(n){return new(n||t)},t.\u0275dir=M({type:t,inputs:{duration:"duration"},standalone:!0,features:[te]});let i=t;return i})(),os=(()=>{let t=class t{constructor(){this.tuiCarouselAutoscroll=h(_n)}};t.\u0275fac=function(n){return new(n||t)},t.\u0275dir=M({type:t,selectors:[["","tuiCarouselAutoscroll",""]],outputs:{tuiCarouselAutoscroll:"tuiCarouselAutoscroll"},standalone:!0});let i=t;return i})(),as=(()=>{let t=class t{constructor(){this.el=ue(),this.tuiCarouselScroll=Y(this.el,"wheel").pipe(ge(({deltaX:e})=>Math.abs(e)>20),Mn(500),S(({deltaX:e})=>Math.sign(e)),Sn(()=>{this.el.scrollLeft=10}))}};t.\u0275fac=function(n){return new(n||t)},t.\u0275dir=M({type:t,selectors:[["","tuiCarouselScroll",""]],outputs:{tuiCarouselScroll:"tuiCarouselScroll"},standalone:!0});let i=t;return i})(),Yr=(()=>{let t=class t{constructor(){this.el=ue(),this.cdr=h(jn),this.isMobile=h(Ee),this.directive=h(_n),this.translate=0,this.items=oi,this.transitioned=!0,this.index=0,this.draggable=!1,this.itemsCount=1,this.indexChange=new L}set indexSetter(e){this.index=e,this.directive.duration=NaN}next(){this.items&&this.index===this.items.length-this.itemsCount||this.updateIndex(this.index+1)}prev(){this.updateIndex(this.index-1)}get transform(){return`translateX(${100*(this.transitioned?this.computedTranslate:this.translate)}%)`}onTransitioned(e){this.transitioned=e,e||(this.translate=this.computedTranslate)}getStyle(e){let n=`${100/e}%`;return{flexBasis:n,minWidth:n,maxWidth:n}}isDisabled(e){return e<this.index||e>this.index+this.itemsCount}onIntersection({intersectionRatio:e},n){e&&e!==1&&!this.transitioned&&this.updateIndex(n-Math.floor(this.itemsCount/2))}onScroll(e){this.isMobile||(e>0?this.next():this.prev())}onPan(e){if(!this.computedDraggable)return;let n=1-this.items.length/this.itemsCount;this.translate=Le(e/this.el.clientWidth+this.translate,n,0)}onSwipe(e){e==="left"?this.next():e==="right"&&this.prev()}onAutoscroll(){this.updateIndex(this.index===this.items.length-1?0:this.index+1)}get computedTranslate(){return-this.index/this.itemsCount}get computedDraggable(){return this.isMobile||this.draggable}updateIndex(e){this.index=Le(e,0,this.items.length-1),this.indexChange.emit(this.index),this.cdr.markForCheck()}};t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=P({type:t,selectors:[["tui-carousel"]],contentQueries:function(n,o,a){if(n&1&&Vn(a,$t,4,Ke),n&2){let s;Se(s=Me())&&(o.items=s)}},hostVars:4,hostBindings:function(n,o){n&1&&b("touchstart",function(){return o.onTransitioned(!1)})("touchend",function(){return o.onTransitioned(!0)})("mousedown",function(){return o.onTransitioned(!1)})("mouseup.silent",function(){return o.onTransitioned(!0)},!1,kn),n&2&&A("_transitioned",o.transitioned)("_draggable",o.draggable)},inputs:{draggable:"draggable",itemsCount:"itemsCount",indexSetter:[0,"index","indexSetter"]},outputs:{indexChange:"indexChange"},standalone:!0,features:[Fn([{directive:_n,inputs:["duration","duration"]}]),j],decls:6,vars:6,consts:[[4,"ngIf"],[1,"t-scroller",3,"tuiCarouselScroll"],["waIntersectionObserver","","waIntersectionRoot","","waIntersectionRootMargin","100px 1000000px 100px -51%","waIntersectionThreshold","0,1",1,"t-wrapper"],[1,"t-items",3,"tuiCarouselAutoscroll","tuiPan","tuiSwipe"],["class","t-item",3,"disabled","ngStyle","waIntersectionObservee",4,"ngFor","ngForOf"],[1,"t-item",3,"waIntersectionObservee","disabled","ngStyle"],[3,"ngTemplateOutlet"]],template:function(n,o){n&1&&(_(0,is,1,0,"ng-container",0),w(1,"async"),m(2,"div",1),b("tuiCarouselScroll",function(s){return o.onScroll(s)}),m(3,"div",2)(4,"div",3),b("tuiCarouselAutoscroll",function(){return o.onAutoscroll()})("tuiPan",function(s){return o.onPan(s[0])})("tuiSwipe",function(s){return o.onSwipe(s.direction)}),_(5,rs,2,3,"fieldset",4),f()()()),n&2&&(d("ngIf",E(1,4,o.items.changes)),u(4),re("transform",o.transform),u(),d("ngForOf",o.items))},dependencies:[W,V,G,Bn,Un,gn,Ur,Wr,Vr,Lr,as,os],styles:['[_nghost-%COMP%]{position:relative;display:block;overflow:hidden}._draggable[_nghost-%COMP%]{-webkit-user-select:none;user-select:none}._draggable[_nghost-%COMP%]:hover{cursor:grab}._draggable[_nghost-%COMP%]:active{cursor:grabbing}.t-items[_ngcontent-%COMP%]{display:flex}._transitioned[_nghost-%COMP%]   .t-items[_ngcontent-%COMP%]{transition-property:transform;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out}  [tuiCarouselButtons] [tuiIconButton]{border-radius:100%}.t-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;padding:var(--tui-carousel-padding, 0 1.25rem);flex:1;min-width:100%;max-width:100%;box-sizing:border-box;border:none;margin:0}.t-wrapper[_ngcontent-%COMP%]{position:sticky;left:0;right:0;min-width:100%;overflow:hidden}.t-scroller[_ngcontent-%COMP%]{scrollbar-width:none;-ms-overflow-style:none;display:flex;overflow:auto;overscroll-behavior-x:none}.t-scroller[_ngcontent-%COMP%]::-webkit-scrollbar, .t-scroller[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{display:none}.t-scroller[_ngcontent-%COMP%]:before, .t-scroller[_ngcontent-%COMP%]:after{content:"";display:block;min-width:1rem}'],changeDetection:0});let i=t;return Er([ce],i.prototype,"getStyle",null),i})(),zr=(()=>{let t=class t{};t.\u0275fac=function(n){return new(n||t)},t.\u0275dir=M({type:t,selectors:[["","tuiCarouselButtons",""]],standalone:!0,features:[U([Ci({appearance:"secondary",size:"m"})])]});let i=t;return i})();function ss(i,t){if(i&1){let r=O();m(0,"div",8)(1,"button",9),b("click",function(){y(r);let n=p().$implicit,o=p();return x(o.onDateClick(n))}),m(2,"div",10),T(3),w(4,"date"),f(),m(5,"div",11),T(6),w(7,"date"),f()()()}if(i&2){let r=p().$implicit,e=p();u(2),A("selected-date",e.isDateSelected(r)),u(),D(" ",z(4,6,r.toUtcNativeDate(),"MMMM d")," "),u(2),A("selected-date",e.isDateSelected(r)),u(),D(" ",z(7,9,r.toUtcNativeDate(),"EEEE")," ")}}function ls(i,t){i&1&&(H(0,6),_(1,ss,8,12,"div",7),$())}var jt=class i{dates=[];selectedDate=null;dateSelected=new L;addMoreDates=new L;carouselIndex=0;onDateClick(t){this.dateSelected.emit(t)}isDateSelected(t){return this.selectedDate?this.selectedDate.daySame(t):!1}prev(){this.carouselIndex>0&&(this.carouselIndex-=1)}next(){this.carouselIndex+=1,this.addMoreDates.emit()}get visibleDates(){return this.dates.slice(this.carouselIndex,this.carouselIndex+4)}static \u0275fac=function(r){return new(r||i)};static \u0275cmp=P({type:i,selectors:[["app-date-filter"]],inputs:{dates:"dates",selectedDate:"selectedDate"},outputs:{dateSelected:"dateSelected",addMoreDates:"addMoreDates"},standalone:!0,features:[j],decls:8,vars:4,consts:[["carousel",""],["tuiCarouselButtons","",1,"wrapper"],["iconStart","@tui.chevron-left","tuiIconButton","","type","button",1,"button-icon",3,"click"],[3,"itemsCount"],["class","carousel",4,"ngFor","ngForOf"],["iconStart","@tui.chevron-right","tuiIconButton","","type","button",1,"button-icon",3,"click"],[1,"carousel"],["class","item",4,"tuiItem"],[1,"item"],["tuiButton","","appearance","flat",1,"button",3,"click"],[1,"date"],[1,"day"]],template:function(r,e){if(r&1){let n=O();m(0,"div",1)(1,"button",2),b("click",function(){return y(n),x(e.prev())}),T(2," Previous "),f(),m(3,"tui-carousel",3,0),_(5,ls,2,0,"ng-container",4),f(),m(6,"button",5),b("click",function(){return y(n),x(e.next())}),T(7,"Next"),f()()}r&2&&(u(3),re("--tui-carousel-padding",0),d("itemsCount",e.visibleDates.length),u(2),d("ngForOf",e.visibleDates))},dependencies:[$t,Yr,zr,pe,q,G,tt],styles:["[_ngcontent-%COMP%]:root{--auth-font-weight: 600;--auth-container-width: 300px;--auth-container-padding: 20px;--auth-form-flex-gap: 20px;--auth-input-padding: 10px 5px}.wrapper[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:100%}.button[_ngcontent-%COMP%]{cursor:pointer;display:flex;flex-direction:column;gap:0;align-items:center;justify-content:center;height:50px;padding:0}.date[_ngcontent-%COMP%]{margin:0;font-size:12px;line-height:12px;color:#fff}.day[_ngcontent-%COMP%]{margin:0;font-size:10px;line-height:16px;color:#fff}.selected-date[_ngcontent-%COMP%]{color:var(--tui-chart-categorical-02)}@media (min-width: 320px) and (max-width: 424px){.button-icon[_ngcontent-%COMP%]{width:20px;height:20px}.date[_ngcontent-%COMP%]{font-size:8px}.day[_ngcontent-%COMP%]{font-size:6px}}"]})};function cs(i,t){if(i&1){let r=O();m(0,"button",16),b("click",function(){let n,o=y(r).$implicit,a=p(4);return x((n=a.form.get("from"))==null?null:n.setValue(o))}),T(1),f()}if(i&2){let r=t.$implicit;d("value",r),u(),D(" ",r," ")}}function us(i,t){if(i&1&&(m(0,"tui-data-list"),_(1,cs,2,2,"button",15),f()),i&2){let r=p(2).tuiLet;u(),d("ngForOf",r)}}function ds(i,t){i&1&&(H(0),_(1,us,2,1,"tui-data-list",14),$())}function ps(i,t){if(i&1&&(m(0,"tui-input",11),T(1," From "),k(2,"span",12),_(3,ds,2,0,"ng-container",13),f()),i&2){let r=t.tuiLet;u(3),d("ngIf",r==null?null:r.length)}}function ms(i,t){if(i&1){let r=O();m(0,"button",16),b("click",function(){let n,o=y(r).$implicit,a=p(4);return x((n=a.form.get("to"))==null?null:n.setValue(o))}),T(1),f()}if(i&2){let r=t.$implicit;d("value",r),u(),D(" ",r," ")}}function fs(i,t){if(i&1&&(m(0,"tui-data-list"),_(1,ms,2,2,"button",15),f()),i&2){let r=p(2).tuiLet;u(),d("ngForOf",r)}}function hs(i,t){i&1&&(H(0),_(1,fs,2,1,"tui-data-list",14),$())}function gs(i,t){if(i&1&&(m(0,"tui-input",17),T(1," To "),k(2,"span",12),_(3,hs,2,0,"ng-container",13),f()),i&2){let r=t.tuiLet;u(3),d("ngIf",r==null?null:r.length)}}function _s(i,t){i&1&&(m(0,"div",3)(1,"tui-input-time",18),T(2,"Time (optional) "),f()())}var Bt=class i{store=h(mt);trainService=h(Dt);alertService=h(Ii);minDate=Q.currentLocal();stations$=this.store.select(Ni);selectedDate=null;ngOnInit(){let t=this.form.get("date")?.value||null;this.selectedDate=t,this.trainService.setSelectedDate(this.selectedDate)}form=new Xn({from:new Ve(null,it.required),to:new Ve(null,it.required),date:new Ve(this.minDate,it.required),time:new Ve(null)});isDateSelected(){return this.form.get("date")?.valid??!1}onSearch(){this.form.valid&&this.prepareSearchRequest().subscribe(t=>{t&&this.trainService.searchTrips(t).subscribe({error:r=>{r.error?.reason==="stationNotFound"?this.showNotification(r.error.message,"Error"):this.showNotification("An unexpected error occurred.","Error")}})})}showNotification(t,r){this.alertService.open(t,{label:r}).subscribe()}prepareSearchRequest(){return this.stations$.pipe(_e(1),S(t=>{let r=this.form.get("from").value,e=this.form.get("to").value;if(!r||!e)return null;let n=t.find(c=>c.city===r),o=t.find(c=>c.city===e);if(!n||!o)return null;let a=this.form.get("date").value;this.trainService.setSelectedDate(a);let s=this.form.get("time").value,l=s?a.append(s).toLocalNativeDate().getTime():a.toLocalNativeDate().getTime();return{fromLatitude:n.latitude,fromLongitude:n.longitude,toLatitude:o.latitude,toLongitude:o.longitude,time:l}}))}swapFromTo(){let t=this.form.get("from")?.value??null,r=this.form.get("to")?.value??null;this.form.get("from")?.setValue(r),this.form.get("to")?.setValue(t)}itemsFrom$=this.form.get("from").valueChanges.pipe(Zt(""),ke(t=>this.stations$.pipe(S(r=>r.map(e=>e.city).filter(e=>Qt(e,t))))));itemsTo$=this.form.get("to").valueChanges.pipe(Zt(""),ke(t=>this.stations$.pipe(S(r=>r.map(e=>e.city).filter(e=>Qt(e,t))))));availableDates=i.generateDates(this.minDate,4);onDateSelected(t){this.selectedDate=t,this.form.get("date")?.setValue(t),this.trainService.setSelectedDate(t),this.onSearch()}addFutureDates(){let r=this.availableDates[this.availableDates.length-1].append({day:1});this.availableDates=[...this.availableDates,r]}static generateDates(t,r){return Array.from({length:r},(e,n)=>t.append({day:n}))}static \u0275fac=function(r){return new(r||i)};static \u0275cmp=P({type:i,selectors:[["app-search-form"]],standalone:!0,features:[j],decls:18,vars:16,consts:[[1,"wrapper"],[1,"form",3,"ngSubmit","formGroup"],[1,"tui-form__row","tui-form__row_multi-fields","center"],[1,"tui-form__multi-field"],["formControlName","from",4,"tuiLet"],["appearance","destructive","iconStart","@tui.fa.solid.right-left","size","s","tuiIconButton","","type","button",1,"tui-icon-button",3,"click"],["formControlName","to",4,"tuiLet"],["formControlName","date","tuiTextfieldSize","s",3,"min"],["class","tui-form__multi-field",4,"ngIf"],["size","l","tuiButton","","type","submit",1,"tui-form__button",3,"disabled"],[3,"dateSelected","addMoreDates","dates","selectedDate"],["formControlName","from"],[1,"tui-required"],[4,"ngIf"],[4,"tuiDataList"],["tuiOption","",3,"value","click",4,"ngFor","ngForOf"],["tuiOption","",3,"click","value"],["formControlName","to"],["formControlName","time","tuiTextfieldSize","s"]],template:function(r,e){if(r&1&&(m(0,"div",0)(1,"form",1),b("ngSubmit",function(){return e.onSearch()}),m(2,"div",2)(3,"div",3),_(4,ps,4,1,"tui-input",4),w(5,"async"),f(),m(6,"button",5),b("click",function(){return e.swapFromTo()}),T(7," icon "),f(),m(8,"div",3),_(9,gs,4,1,"tui-input",6),w(10,"async"),f(),m(11,"div",3)(12,"tui-input-date",7),T(13,"Date"),f()(),_(14,_s,3,0,"div",8),m(15,"button",9),T(16,"Search"),f()()(),m(17,"app-date-filter",10),b("dateSelected",function(o){return e.onDateSelected(o)})("addMoreDates",function(){return e.addFutureDates()}),f()()),r&2){let n;u(),d("formGroup",e.form),u(3),d("tuiLet",E(5,12,e.itemsFrom$)),u(2),re("border-radius",100,"%")("color","var(--tui-text-primary-on-accent-1)"),u(3),d("tuiLet",E(10,14,e.itemsTo$)),u(3),d("min",e.minDate),u(2),d("ngIf",e.isDateSelected()),u(),d("disabled",!e.form.valid),u(2),d("dates",e.availableDates)("selectedDate",(n=(n=e.form.get("date"))==null?null:n.value)!==null&&n!==void 0?n:null)}},dependencies:[q,G,V,W,Qn,Zn,zn,Gn,Kn,qn,Mt,Ki,qi,Ht,Pr,hn,pe,Fr,kr,Rr,Be,ki,je,ye,jt],styles:["[_ngcontent-%COMP%]:root{--auth-font-weight: 600;--auth-container-width: 300px;--auth-container-padding: 20px;--auth-form-flex-gap: 20px;--auth-input-padding: 10px 5px}[_nghost-%COMP%]{display:flex;box-sizing:border-box;width:1160px;margin:0 0 20px;padding:20px 16px;background-color:var(--tui-text-primary);border-radius:10px}.wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px;width:100%}.form[_ngcontent-%COMP%]{width:100%}.center[_ngcontent-%COMP%]{align-items:center}.tui-icon-button[_ngcontent-%COMP%]{margin-left:20px;transition:background-color .3s ease,transform .3s ease}.tui-icon-button[_ngcontent-%COMP%]:hover{transform:scale(1.1);color:var(--tui-text-on-primary);background-color:var(--tui-primary)}.tui-icon-button[_ngcontent-%COMP%]:active{transform:scale(1.05)}@media (min-width: 1024px) and (max-width: 1439px){[_nghost-%COMP%]{max-width:986px}}@media (min-width: 768px) and (max-width: 1023px){[_nghost-%COMP%]{max-width:calc(100vw - 40px)}}@media (min-width: 425px) and (max-width: 767px){[_nghost-%COMP%]{max-width:calc(100vw - 40px)}.center[_ngcontent-%COMP%]{align-items:center;justify-content:center}.tui-icon-button[_ngcontent-%COMP%]{margin-top:10px}.tui-form__button[_ngcontent-%COMP%]{margin-right:auto;margin-left:auto}}@media (min-width: 320px) and (max-width: 424px){[_nghost-%COMP%]{max-width:calc(100vw - 40px);padding:20px 8px}.tui-icon-button[_ngcontent-%COMP%]{margin-top:10px}.center[_ngcontent-%COMP%]{align-items:center;justify-content:center}.tui-form__button[_ngcontent-%COMP%]{width:100%}}"]})};var Ut=class i{transform(t,r){if(!t||!r)return t;let e=r.toLocalNativeDate(),n=new Date(e);n.setHours(23,59,59,999);let o=t.routes.map(a=>{let s=a.schedule.filter(l=>{if(a.path.findIndex(C=>C===t.from.stationId)===-1)return!1;let g=l.segments.find((C,I)=>a.path[I]===t.from.stationId);if(!g)return!1;let v=new Date(g.time[0]);return v>=e&&v<=n});return be(xe({},a),{schedule:s})}).filter(a=>a.schedule.length>0);return be(xe({},t),{routes:o})}static \u0275fac=function(r){return new(r||i)};static \u0275pipe=ne({name:"filterRoutes",type:i,pure:!0,standalone:!0})};var Wt=class i{transform(t,r){let e=r.from.stationId,n=r.to.stationId,o=t.path.indexOf(e),a=t.path.indexOf(n),s=t.path.slice(o,a),l=t.schedule.map(c=>be(xe({},c),{segments:c.segments.slice(o,a)}));return be(xe({},t),{path:s,schedule:l})}static \u0275fac=function(r){return new(r||i)};static \u0275pipe=ne({name:"trimRoute",type:i,pure:!0,standalone:!0})};function vs(i,t){i&1&&(H(0),k(1,"tui-loader",4),$())}function Cs(i,t){if(i&1&&(H(0),_(1,vs,2,0,"ng-container",3),$()),i&2){let r=t.ngIf;u(),d("ngIf",r)}}function ys(i,t){if(i&1&&(m(0,"div",21)(1,"div",22),T(2),f(),m(3,"div"),T(4),f(),m(5,"div",23),T(6),w(7,"sumCarriagePrice"),w(8,"currency"),f()()),i&2){let r=t.$implicit,e=p().$implicit,n=p().$implicit,o=p(5);u(2),le(r),u(2),D("",o.getAvailableSeatsCountForCarriage(r,n)," seats"),u(2),D(" ",Ln(8,6,z(7,3,e,r),"USD","symbol")," ")}}function xs(i,t){if(i&1){let r=O();m(0,"div",10),b("click",function(){let n=y(r).$implicit,o=p(6);return x(o.onCardClick(n.rideId))})("keyup.enter",function(){let n=y(r).$implicit,o=p(6);return x(o.onCardClick(n.rideId))})("keydown.space",function(){let n=y(r).$implicit,o=p(6);return x(o.onCardClick(n.rideId))}),m(1,"div",11)(2,"button",12),b("click",function(n){let o=y(r).$implicit,a=p().$implicit,s=p(5);return x(s.showDialog(o,n,a))}),T(3," Route "),f(),m(4,"div",13)(5,"div",14),T(6),w(7,"date"),f(),m(8,"div",15),T(9),w(10,"formatDuration"),f(),m(11,"div",16),T(12),w(13,"date"),f()(),m(14,"div",17)(15,"div"),T(16),w(17,"date"),f(),m(18,"div"),T(19),w(20,"date"),f()(),m(21,"div",18)(22,"div"),T(23),f(),m(24,"div"),T(25),f()()(),m(26,"div",19),_(27,ys,9,10,"div",20),w(28,"uniqueCarriages"),f()()}if(i&2){let r=t.$implicit,e=p().$implicit,n=p(3).ngIf;u(6),D(" ",z(7,8,r.segments[0].time[0],"shortTime")," "),u(3),D(" ",z(10,11,r.segments[0].time[0],r.segments.at(-1).time[1])," "),u(3),D(" ",z(13,14,r.segments.at(-1).time[1],"shortTime")," "),u(4),le(z(17,17,r.segments[0].time[0],"MMMM d")),u(3),le(z(20,20,r.segments.at(-1).time[1],"MMMM d")),u(4),le(n.from.city),u(2),le(n.to.city),u(2),d("ngForOf",E(28,23,e.carriages))}}function bs(i,t){if(i&1&&(m(0,"div",8),_(1,xs,29,25,"div",9),w(2,"trimRoute"),f()),i&2){let r=t.$implicit,e=p(3).ngIf;u(),d("ngForOf",z(2,1,r,e).schedule)}}function Ts(i,t){if(i&1&&(m(0,"div",6),_(1,bs,3,4,"div",7),f()),i&2){let r=p().ngIf;u(),d("ngForOf",r.routes)}}function ws(i,t){i&1&&k(0,"app-no-rides-available")}function Is(i,t){if(i&1&&(H(0),_(1,Ts,2,1,"div",5)(2,ws,1,0,"ng-template",null,1,K),$()),i&2){let r=t.ngIf,e=Z(3);u(),d("ngIf",r.routes.length>0)("ngIfElse",e)}}function Os(i,t){if(i&1&&(H(0),_(1,Is,4,2,"ng-container",3),w(2,"async"),w(3,"filterRoutes"),$()),i&2){let r=t.ngIf,e=p(2);u(),d("ngIf",z(3,3,r,E(2,1,e.selectedDate$)))}}function Ss(i,t){if(i&1&&(_(0,Os,4,6,"ng-container",3),w(1,"async")),i&2){let r=p();d("ngIf",E(1,1,r.searchResponse$))}}var Yt=class i{trainService=h(Dt);injector=h(Dn);router=h(Ai);dialogs=h(Ri);store=h(mt);searchResponse$=this.trainService.searchResponse$;carriagesList$=this.store.select(Vi);loading$=this.trainService.loading$;selectedDate$=this.trainService.selectedDate$;showDialog(t,r,e){r.stopPropagation(),this.searchResponse$.pipe(S(n=>{n&&this.dialogs.open(new yi(Ji,this.injector),{size:"m",closeable:!0,dismissible:!0,data:{schedule:t,from:n.from.stationId,to:n.to.stationId,path:e.path}}).pipe(_e(1)).subscribe()})).pipe(_e(1)).subscribe()}onCardClick(t){this.searchResponse$.pipe(_e(1),S(r=>{if(!r)return;let e=r.from.stationId,n=r.to.stationId;this.router.navigate(["/trip",t],{queryParams:{from:e,to:n}})})).subscribe()}getAvailableSeatsCountForCarriage(t,r){let e=0,n=new Set;r.schedule.forEach(a=>{a.segments.forEach(s=>{s.occupiedSeats.forEach(l=>n.add(l))})});let o=0;return this.carriagesList$.pipe(_e(1)).subscribe(a=>{r.carriages.forEach(s=>{let l=a.find(c=>c.code===s);if(l&&l.code===t){let c=l.rows*(l.leftSeats+l.rightSeats),g=Array.from(n).filter(v=>v>=o&&v<o+c).length;e+=c-g}o+=l.rows*(l.leftSeats+l.rightSeats)})}),e}static \u0275fac=function(r){return new(r||i)};static \u0275cmp=P({type:i,selectors:[["app-search-results"]],standalone:!0,features:[j],decls:4,vars:4,consts:[["content",""],["noRides",""],[4,"ngIf","ngIfElse"],[4,"ngIf"],[1,"tui-space_vertical-3","loader"],["class","routes",4,"ngIf","ngIfElse"],[1,"routes"],["class","route",4,"ngFor","ngForOf"],[1,"route"],["class","schedule","tabindex","0",3,"click","keyup.enter","keydown.space",4,"ngFor","ngForOf"],["tabindex","0",1,"schedule",3,"click","keyup.enter","keydown.space"],[1,"info-section"],["tuiButton","","size","s","appearance","outline",3,"click"],[1,"time"],[1,"start-time","tui-text_body-l-2"],[1,"duration"],[1,"end-time","tui-text_body-l-2"],[1,"date"],[1,"city","tui-text_body-l-1"],[1,"price-section"],["class","carriage",4,"ngFor","ngForOf"],[1,"carriage"],[1,"tui-text_body-m"],[1,"price"]],template:function(r,e){if(r&1&&(_(0,Cs,2,1,"ng-container",2),w(1,"async"),_(2,Ss,2,3,"ng-template",null,0,K)),r&2){let n=Z(3);d("ngIf",E(1,2,e.loading$))("ngIfElse",n)}},dependencies:[q,G,V,W,Wn,tt,pe,nr,Qi,Fi,er,tr,Ut,Wt],styles:['@charset "UTF-8";[_ngcontent-%COMP%]:root{--auth-font-weight: 600;--auth-container-width: 300px;--auth-container-padding: 20px;--auth-form-flex-gap: 20px;--auth-input-padding: 10px 5px}[_nghost-%COMP%]{display:flex;align-items:center;justify-content:center;box-sizing:border-box;width:100%;max-width:1160px;margin:20px 0;border-radius:10px}.routes[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px;justify-content:center;width:100%}.route[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px}.schedule[_ngcontent-%COMP%]{cursor:pointer;display:grid;grid-template-columns:1fr 250px;gap:20px;padding:10px;background-color:var(--tui-background-base);border:1px solid var(--tui-background-neutral-1-pressed);border-radius:10px;box-shadow:0 4px 6px #0000001a}.info-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:5px;align-items:flex-start;width:100%}.info-section[_ngcontent-%COMP%]   .time[_ngcontent-%COMP%]{position:relative;display:grid;grid-template-columns:1fr 1fr 1fr;align-items:flex-end;width:100%;margin-top:10px;padding-bottom:10px;border-bottom:1px solid var(--tui-background-neutral-1-pressed)}.info-section[_ngcontent-%COMP%]   .time[_ngcontent-%COMP%]   .start-time[_ngcontent-%COMP%], .info-section[_ngcontent-%COMP%]   .time[_ngcontent-%COMP%]   .end-time[_ngcontent-%COMP%]{position:relative;font-weight:700}.info-section[_ngcontent-%COMP%]   .time[_ngcontent-%COMP%]   .start-time[_ngcontent-%COMP%]:before, .info-section[_ngcontent-%COMP%]   .time[_ngcontent-%COMP%]   .end-time[_ngcontent-%COMP%]:before{content:"\\26aa";position:absolute;bottom:-6px;width:8px;height:8px;font-size:10px}.info-section[_ngcontent-%COMP%]   .time[_ngcontent-%COMP%]   .start-time[_ngcontent-%COMP%]:before{left:-5px}.info-section[_ngcontent-%COMP%]   .time[_ngcontent-%COMP%]   .end-time[_ngcontent-%COMP%]:before{right:0}.info-section[_ngcontent-%COMP%]   .time[_ngcontent-%COMP%]   .duration[_ngcontent-%COMP%]{color:var(--tui-text-secondary);text-align:center}.info-section[_ngcontent-%COMP%]   .time[_ngcontent-%COMP%]   .end-time[_ngcontent-%COMP%]{text-align:right}.info-section[_ngcontent-%COMP%]   .date[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;width:100%;margin-top:10px}.info-section[_ngcontent-%COMP%]   .city[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;width:100%;font-weight:500}.price-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:5px;justify-content:flex-end;padding-left:20px;border-left:1px solid var(--tui-background-neutral-1-pressed)}.price-section[_ngcontent-%COMP%]   .carriage[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);align-items:center}.price-section[_ngcontent-%COMP%]   .carriage[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]{text-align:right}.price-section[_ngcontent-%COMP%]   .carriage[_ngcontent-%COMP%]   .tui-text_body-m[_ngcontent-%COMP%], .price-section[_ngcontent-%COMP%]   .carriage[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{overflow:hidden;max-width:80px;text-overflow:ellipsis;white-space:nowrap}tui-loader[_ngcontent-%COMP%]{margin-top:200px}@media (min-width: 1024px) and (max-width: 1439px){[_nghost-%COMP%]{max-width:986px}}@media (min-width: 768px) and (max-width: 1023px){[_nghost-%COMP%]{max-width:calc(100vw - 40px)}}@media (min-width: 425px) and (max-width: 767px){[_nghost-%COMP%]{max-width:calc(100vw - 40px)}.schedule[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:10px}.price-section[_ngcontent-%COMP%]{padding-left:0;border-left:none}}@media (min-width: 320px) and (max-width: 424px){[_nghost-%COMP%]{max-width:calc(100vw - 40px)}.schedule[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:10px}.price-section[_ngcontent-%COMP%]{padding-left:0;border-left:none}}']})};var Gr=class i{static \u0275fac=function(r){return new(r||i)};static \u0275cmp=P({type:i,selectors:[["app-home-page"]],standalone:!0,features:[j],decls:3,vars:0,consts:[[1,"home-page"]],template:function(r,e){r&1&&(m(0,"div",0),k(1,"app-search-form")(2,"app-search-results"),f())},dependencies:[Mt,Ht,Bt,Yt],styles:["[_ngcontent-%COMP%]:root{--auth-font-weight: 600;--auth-container-width: 300px;--auth-container-padding: 20px;--auth-form-flex-gap: 20px;--auth-input-padding: 10px 5px}[_nghost-%COMP%]{display:flex;flex-direction:column;gap:20px;width:100%;max-width:1160px;margin:0 auto}@media (min-width: 1024px) and (max-width: 1439px){[_nghost-%COMP%]{max-width:986px}}@media (min-width: 768px) and (max-width: 1023px){[_nghost-%COMP%]{max-width:calc(100vw - 40px)}}@media (min-width: 425px) and (max-width: 767px){[_nghost-%COMP%]{max-width:calc(100vw - 20px)}}@media (min-width: 320px) and (max-width: 424px){[_nghost-%COMP%]{max-width:calc(100vw - 20px)}}"]})};export{Gr as HomePageComponent};
