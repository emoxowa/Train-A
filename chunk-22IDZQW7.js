import{a as Ke}from"./chunk-VTDYV3G2.js";import{a as qe,b as We,c as Ze,d as Ye,e as Ge,f as Je}from"./chunk-6CIIJVBS.js";import{a as F}from"./chunk-NKXSX425.js";import"./chunk-GQC6GBTQ.js";import{a as $e}from"./chunk-346BXNRU.js";import"./chunk-WNQC6ED5.js";import{a as He}from"./chunk-QJ4XV6RO.js";import{c as je}from"./chunk-IMOUA4KZ.js";import{A as Ee,Ha as ze,I as Re,K as X,Ka as Ae,R as Be,U as ee,ca as Z,gb as Fe,hb as Ne,l as Te,rb as Ve}from"./chunk-FEYVFRDP.js";import{a as K,o as Qe}from"./chunk-RR4QGK55.js";import{b as Le,d as Ue,f as te}from"./chunk-EH7XB44O.js";import{Ba as ge,Ca as h,D as oe,Db as o,Ea as D,Eb as s,F as se,Fa as fe,Fb as P,Gb as T,H as ce,Hb as E,Jb as U,La as he,M as j,Ma as S,Mb as x,Na as O,Nb as m,Nc as Oe,Oa as be,Ob as Q,Pb as H,Qc as Pe,Rb as $,Rc as ye,Sa as xe,Tb as R,Ua as J,Ub as B,Uc as Ie,V as le,Va as ve,Vc as Me,Wb as p,Wc as we,Xa as L,Xb as y,Xc as De,Yb as q,Yc as ke,Za as _e,Zb as z,d as re,da as de,db as c,ec as W,fc as v,ha as pe,lc as g,mc as _,nc as A,o as ae,oc as C,pa as ue,pb as Ce,rc as Se,sa as me,tb as b,ub as k,va as u,vb as f}from"./chunk-2XEAWUUP.js";import{a as M,b as w}from"./chunk-T527G4PA.js";var at=typeof MutationObserver<"u"?MutationObserver:class{observe(){}disconnect(){}takeRecords(){return[]}},ie=new me("[WA_MUTATION_OBSERVER_INIT]"),ot=ie;var Xe=(()=>{class r extends re{constructor(){let i=u(L).nativeElement,e=u(ot);super(n=>{let a=new at(d=>{n.next(d)});return a.observe(i,e),()=>{a.disconnect()}})}static \u0275fac=function(e){return new(e||r)};static \u0275prov=ue({token:r,factory:r.\u0275fac})}return r})();var et={size:"m"},st=Ee(et);function tt(r){return Re(st,r,et)}var ct=["*"],lt=(()=>{let t=class t{constructor(){this.controls=Z,this.links=Z,this.elements=Z,this.destroyRef=u(xe),this.component=u(ne),this.el=ee(),this.isBrowser=ke(u(_e))}ngAfterContentInit(){ze(this.controls).pipe(pe(e=>oe(e.map(n=>n.valueChanges))),se(()=>this.isBrowser),K(this.destroyRef)).subscribe(()=>{this.update(this.el.querySelector(":checked"))})}ngAfterContentChecked(){this.links.length&&this.update(this.elements.get(this.linkIndex)?.nativeElement||null)}update(e){let n=this.getIndex(e);n>=0&&this.component.update(n)}get linkIndex(){return this.links.toArray().findIndex(e=>e.isActive)}getIndex(e){return Array.from(this.el.children).findIndex(n=>n.contains(e))}};t.\u0275fac=function(n){return new(n||t)},t.\u0275dir=D({type:t,contentQueries:function(n,a,d){if(n&1&&($(d,Te,5),$(d,te,4),$(d,te,4,L)),n&2){let l;R(l=B())&&(a.controls=l),R(l=B())&&(a.links=l),R(l=B())&&(a.elements=l)}},hostBindings:function(n,a){n&1&&x("click",function(l){return a.update(l.target)})},standalone:!0});let r=t;return r})(),ne=(()=>{let t=class t{constructor(){this.el=ee(),this.sub=u(F).pipe(Ae(u(ve)),K()).subscribe(()=>this.refresh()),this.size="s",this.activeItemIndex=0,this.activeItemIndexChange=new J}ngOnChanges(){this.refresh()}update(e){e!==this.activeItemIndex&&(this.activeItemIndex=e,this.activeItemIndexChange.emit(e),this.refresh())}get left(){let e=this.activeElement;return Be(e)?e.offsetLeft:0}get width(){return this.activeElement?.clientWidth||0}get activeElement(){return this.el.children.item(this.activeItemIndex)}refresh(){this.el.style.setProperty("--t-left",X(this.left)),this.el.style.setProperty("--t-width",X(this.width))}};t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=h({type:t,selectors:[["tui-segmented"]],hostVars:1,hostBindings:function(n,a){n&2&&k("data-size",a.size)},inputs:{size:"size",activeItemIndex:"activeItemIndex"},outputs:{activeItemIndexChange:"activeItemIndexChange"},standalone:!0,features:[W([F,tt({size:"s"})]),Ce([lt]),he,v],ngContentSelectors:ct,decls:1,vars:0,template:function(n,a){n&1&&(Q(),H(0))},styles:[`tui-segmented{position:relative;display:flex;box-sizing:border-box;isolation:isolate;color:var(--tui-background-neutral-1);border:.125rem solid transparent}tui-segmented[data-size=s]{--t-padding: .625rem;--t-gap: .5rem;--t-margin: -.125rem;height:var(--tui-height-s);font:var(--tui-font-text-s);border-radius:var(--tui-radius-s)}tui-segmented[data-size=s]>*:before,tui-segmented[data-size=s]>*:after,tui-segmented[data-size=s] tui-icon{font-size:1rem}tui-segmented[data-size=m]{--t-padding: .875rem;--t-gap: 1rem;--t-margin: -.375rem;height:var(--tui-height-m);font:var(--tui-font-text-m);border-radius:var(--tui-radius-s)}tui-segmented[data-size=l]{--t-padding: 1.125rem;--t-gap: 1rem;--t-margin: -.375rem;height:var(--tui-height-l);font:var(--tui-font-text-l);border-radius:var(--tui-radius-m);border-width:.25rem}tui-segmented[data-size=l]:after{box-shadow:0 0 0 .25rem}tui-segmented>a,tui-segmented>button,tui-segmented>label,tui-segmented>label>input:not([tuiRadio]){transition-property:color;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out;-webkit-appearance:none;appearance:none;padding:0;border:0;background:none;font-size:inherit;line-height:inherit;text-decoration:none;position:relative;display:flex;align-items:center;justify-content:center;white-space:nowrap;gap:var(--t-gap);margin:0;padding:0 var(--t-padding);color:var(--tui-text-primary);overflow:hidden;cursor:pointer;font:inherit;border-radius:inherit}tui-segmented>a>*,tui-segmented>button>*,tui-segmented>label>*,tui-segmented>label>input:not([tuiRadio])>*,tui-segmented>a:before,tui-segmented>button:before,tui-segmented>label:before,tui-segmented>label>input:not([tuiRadio]):before,tui-segmented>a:after,tui-segmented>button:after,tui-segmented>label:after,tui-segmented>label>input:not([tuiRadio]):after{margin:0 var(--t-margin)}tui-segmented>a:focus-visible,tui-segmented>button:focus-visible,tui-segmented>label:focus-visible,tui-segmented>label>input:not([tuiRadio]):focus-visible{outline:.125rem solid var(--tui-border-focus);outline-offset:-.125rem}tui-segmented>label>input:not([tuiRadio]){position:absolute;top:0;left:0;width:100%;height:100%}tui-segmented:after{position:absolute;top:0;left:0;width:100%;height:100%;content:"";z-index:-1;border-radius:inherit;background:currentColor;box-shadow:0 0 0 .125rem}tui-segmented:before{transition-property:left,width;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out;content:"";position:absolute;left:var(--t-left);height:100%;width:var(--t-width);border-radius:inherit;background:currentColor;color:var(--tui-background-base);box-shadow:0 .25rem 1.25rem #0000001a}
`],encapsulation:2,changeDetection:0});let r=t;return r})();var Y=class r{reservedSeats=0;availableSeats=0;selectedSeats=0;static \u0275fac=function(i){return new(i||r)};static \u0275cmp=h({type:r,selectors:[["app-legend"]],inputs:{reservedSeats:"reservedSeats",availableSeats:"availableSeats",selectedSeats:"selectedSeats"},standalone:!0,features:[v],decls:21,vars:3,consts:[[1,"text"],[1,"legend"],[1,"legend-item"],[1,"seat","reserved"],[1,"seat-number"],[1,"seat","available"],[1,"seat","selected"]],template:function(i,e){i&1&&(o(0,"p",0),p(1,"Legend"),s(),o(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4),p(6),s()(),o(7,"span"),p(8,"Reserved seat"),s()(),o(9,"div",2)(10,"div",5)(11,"div",4),p(12),s()(),o(13,"span"),p(14,"Available seat"),s()(),o(15,"div",2)(16,"div",6)(17,"div",4),p(18),s()(),o(19,"span"),p(20,"Selected seat"),s()()()),i&2&&(c(6),y(e.reservedSeats),c(6),y(e.availableSeats),c(6),y(e.selectedSeats))},styles:['[_ngcontent-%COMP%]:root{--auth-font-weight: 600;--auth-container-width: 300px;--auth-container-padding: 20px;--auth-form-flex-gap: 20px;--auth-input-padding: 10px 5px}.legend[_ngcontent-%COMP%]{display:flex;gap:20px;align-items:center;font-family:Arial,sans-serif}.legend-item[_ngcontent-%COMP%]{display:flex;gap:8px;align-items:center}.seat[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;justify-content:center;width:32px;height:32px;border-radius:4px}.seat-number[_ngcontent-%COMP%]{position:relative;z-index:2;font-weight:700;color:#fff}.seat[_ngcontent-%COMP%]:before{content:"";position:absolute;z-index:1;inset:3px 0 0 3px;height:23px;border-radius:4px}.seat.reserved[_ngcontent-%COMP%]{background-color:#d3d3d3}.seat.reserved[_ngcontent-%COMP%]   .seat-number[_ngcontent-%COMP%]{color:gray}.seat.reserved[_ngcontent-%COMP%]:before{top:5px;left:5px;background-color:#f0f0f0}.seat.available[_ngcontent-%COMP%]{background-color:#039}.seat.available[_ngcontent-%COMP%]:before{top:5px;left:5px;background-color:#04c}.seat.selected[_ngcontent-%COMP%]{background-color:#f90}.seat.selected[_ngcontent-%COMP%]:before{top:5px;left:5px;background-color:#ffb84d}.text[_ngcontent-%COMP%]{font-weight:700}@media (min-width: 320px) and (max-width: 424px){.legend[_ngcontent-%COMP%]{gap:10px;font-size:10px;line-height:1}}']})};var pt=["tuiAppBarBack",""],ut=["*"],li=[F,Xe,{provide:ie,useValue:{characterData:!0,childList:!0,subtree:!0}},Fe({size:"m",appearance:"link"})];var it=(()=>{let t=class t{constructor(){this.tuiSlot="left"}};t.\u0275fac=function(n){return new(n||t)},t.\u0275dir=D({type:t,selectors:[["","tuiSlot",""]],inputs:{tuiSlot:"tuiSlot"},standalone:!0});let r=t;return r})(),nt=(()=>{let t=class t{};t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=h({type:t,selectors:[["button","tuiAppBarBack",""],["a","tuiAppBarBack",""]],standalone:!0,features:[v],attrs:pt,ngContentSelectors:ut,decls:5,vars:0,consts:[["height","24","viewBox","0 0 24 24","width","24","xmlns","http://www.w3.org/2000/svg",1,"t-ios"],["d","M7.44025 12L14.9826 4.43872C15.5391 3.88083 15.5391 2.97631 14.9826 2.41842C14.4261 1.86053 13.5239 1.86053 12.9674 2.41842L4.41737 10.9898C3.86088 11.5477 3.86088 12.4523 4.41737 13.0102L12.9674 21.5816C13.5239 22.1395 14.4261 22.1395 14.9826 21.5816C15.5391 21.0237 15.5391 20.1192 14.9826 19.5613L7.44025 12Z","fill","currentColor"],["height","24","viewBox","0 0 24 24","width","24","xmlns","http://www.w3.org/2000/svg",1,"t-android"],["d","M19.6999 11.5899C19.6999 11.0377 19.2522 10.5899 18.6999 10.5899H7.49992L12.3999 5.68995C12.7865 5.30335 12.7865 4.67655 12.3999 4.28995V4.28995C12.0133 3.90335 11.3865 3.90335 10.9999 4.28995L4.40703 10.8828C4.0165 11.2734 4.01651 11.9065 4.40703 12.2971L10.9999 18.89C11.3865 19.2765 12.0133 19.2765 12.3999 18.8899V18.8899C12.7865 18.5034 12.7865 17.8765 12.3999 17.49L7.49992 12.5899H18.6999C19.2522 12.5899 19.6999 12.1422 19.6999 11.5899V11.5899Z","fill","currentColor"]],template:function(n,a){n&1&&(Q(),be(),o(0,"svg",0),P(1,"path",1),s(),o(2,"svg",2),P(3,"path",3),s(),H(4))},styles:['[_nghost-%COMP%]{-webkit-appearance:none;appearance:none;padding:0;border:0;background:none;font-size:inherit;line-height:inherit;text-decoration:none;display:flex;align-items:center;padding:0 .625rem 0 .125rem;color:var(--tui-text-action)}[_nghost-%COMP%]   [data-platform="android"][_nghost-%COMP%], [data-platform="android"]   [_nghost-%COMP%]{font-size:0;padding:0 .625rem}[_nghost-%COMP%]   [data-platform="android"][_nghost-%COMP%]   .t-ios[_ngcontent-%COMP%], [data-platform="android"]   [_nghost-%COMP%]   .t-ios[_ngcontent-%COMP%]{display:none}[_nghost-%COMP%]   [data-platform="android"][_nghost-%COMP%]   .t-android[_ngcontent-%COMP%], [data-platform="android"]   [_nghost-%COMP%]   .t-android[_ngcontent-%COMP%]{display:block}.t-android[_ngcontent-%COMP%]{display:none}'],changeDetection:0});let r=t;return r})();var G=class r{transform(t,i,e){let n=t.path.indexOf(i),a=t.path.indexOf(e),d=t.path.slice(n,a),l=t.schedule.segments.slice(n,a);return w(M({},t),{path:d,schedule:{segments:l}})}static \u0275fac=function(i){return new(i||r)};static \u0275pipe=fe({name:"trimRideInformation",type:r,pure:!0,standalone:!0})};function mt(r,t){r&1&&(o(0,"div",20)(1,"p"),p(2,"Booking successful!"),s()())}function gt(r,t){if(r&1&&(o(0,"div",21)(1,"p"),p(2),s()()),r&2){let i=m(3);c(2),y(i.errorMessage)}}function ft(r,t){if(r&1){let i=U();o(0,"button",22),x("click",function(){let n=S(i).$implicit,a=m(3);return O(a.onCarriageSelected(n))}),o(1,"p"),p(2),s(),o(3,"p",23),p(4),g(5,"trimRideInformation"),g(6,"sumCarriagePrice"),g(7,"currency"),s()()}if(r&2){let i=t.$implicit,e=m().ngIf,n=m(2);c(2),z("",i,": ",n.getAvailableSeatsCountForCarriage(i),""),c(2),q(" ",C(7,10,A(6,7,C(5,3,e,n.stationStart,n.stationEnd).schedule,i),"USD","symbol")," ")}}function ht(r,t){if(r&1){let i=U();o(0,"div",25)(1,"app-carriage",26),x("seatSelected",function(n){S(i);let a=m().index,d=m(3);return O(d.onSeatSelected(n,a))}),s()()}if(r&2){let i=m(),e=i.$implicit,n=i.index,a=m(3);k("data-carriage-index",n),c(),f("carriagesData",a.getCarriageData(e))("selectedSeatIndex",a.selectedCarriageIndex===n?a.selectedSeatIndex:null)("occupiedSeats",a.getOccupiedSeatsForCarriage(n))}}function bt(r,t){if(r&1&&(T(0),b(1,ht,2,4,"div",24),E()),r&2){let i=t.$implicit,e=m(3);c(),f("ngIf",!e.selectedCarriage||i===e.selectedCarriage)}}function xt(r,t){if(r&1&&(o(0,"span"),p(1),s()),r&2){let i=m(3);c(),z("",i.selectedOrderCarriage,", Seat ",i.selectedSeat,"")}}function vt(r,t){if(r&1&&(o(0,"span"),p(1),g(2,"trimRideInformation"),g(3,"sumCarriagePrice"),g(4,"currency"),s()),r&2){let i=m().ngIf,e=m(2);c(),q(" ",C(4,8,A(3,5,C(2,1,i,e.stationStart,e.stationEnd).schedule,e.selectedOrderCarriage),"USD","symbol")," ")}}function _t(r,t){if(r&1){let i=U();T(0),o(1,"div",2)(2,"button",3),x("click",function(){S(i);let n=m(2);return O(n.goBack())}),p(3,"Back"),s(),o(4,"div")(5,"div",4)(6,"p"),p(7),g(8,"cityName"),g(9,"async"),g(10,"cityName"),g(11,"async"),s(),o(12,"p"),p(13),g(14,"trimRideInformation"),g(15,"date"),g(16,"trimRideInformation"),g(17,"date"),s()(),o(18,"div",5),p(19),o(20,"button",6),x("click",function(n){S(i);let a=m(2);return O(a.showDialog(n))}),p(21,"Route"),s()()()(),b(22,mt,3,0,"div",7)(23,gt,3,1,"div",8),o(24,"div",9)(25,"div")(26,"tui-segmented",10),b(27,ft,8,14,"button",11),g(28,"uniqueCarriages"),s()(),o(29,"div",12)(30,"div",13),b(31,bt,2,1,"ng-container",14),s(),o(32,"div",15)(33,"div",16),b(34,xt,2,2,"span",1)(35,vt,5,12,"span",1),s(),o(36,"button",17),x("click",function(){S(i);let n=m(2);return O(n.bookSeat())}),p(37,"Book seat"),s()()(),o(38,"div",18),P(39,"app-legend",19),s()(),E()}if(r&2){let i=t.ngIf,e=m(2);c(7),z("",_(9,17,_(8,15,e.stationStart))," \u2192 ",_(11,21,_(10,19,e.stationEnd)),""),c(6),z(" ",A(15,27,C(14,23,i,e.stationStart,e.stationEnd).schedule.segments[0].time[0],"MMM d, h:mm a")," \u2192 ",A(17,34,C(16,30,i,e.stationStart,e.stationEnd).schedule.segments.at(-1).time[1],"MMM d, h:mm a")," "),c(6),q(" Ride ",i.rideId," "),c(3),f("ngIf",e.bookingSuccess),c(),f("ngIf",e.bookingError),c(4),f("ngForOf",_(28,37,i.carriages)),c(4),f("ngForOf",i.carriages),c(3),f("ngIf",e.selectedSeat),c(),f("ngIf",e.selectedSeat),c(),f("disabled",e.selectedSeat===null),c(3),f("reservedSeats",e.occupiedSeats.length)("availableSeats",e.availableSeatsCount)("selectedSeats",e.selectedSeat?1:0)}}function Ct(r,t){if(r&1&&(T(0),b(1,_t,40,39,"ng-container",1),g(2,"async"),E()),r&2){let i=m();c(),f("ngIf",_(2,1,i.rideInformation$))}}function St(r,t){r&1&&(o(0,"p"),p(1,"Ride not found."),s())}function Ot(r,t){r&1&&(T(0),P(1,"app-no-rides-available"),E())}var rt=class r{dialogs=u(je);injector=u(ge);location=u(Oe);trainService=u(qe);orderService=u($e);route=u(Le);store=u(Qe);router=u(Ue);rideInformation$;selectedCarriage=null;selectedOrderCarriage=null;selectedSeat=null;carriagesList$=this.store.select(He);occupiedSeats=[];availableSeatsCount=0;stationStart=0;stationEnd=0;showNoRidesAvailable=!1;bookingSuccess=!1;bookingError=!1;errorMessage=null;selectedCarriageIndex=null;selectedSeatIndex=null;ngOnInit(){this.initializeRideData()}initializeRideData(){let t=Number(this.route.snapshot.paramMap.get("id"));this.stationStart=Number(this.route.snapshot.queryParamMap.get("from")),this.stationEnd=Number(this.route.snapshot.queryParamMap.get("to")),t&&(this.rideInformation$=this.trainService.getRideInformation(t).pipe(de(1),ce(()=>(this.showNoRidesAvailable=!0,ae(null)))),this.rideInformation$.pipe(le()).subscribe(i=>{if(i&&i.carriages.length>0){let[e]=i.carriages;this.selectedCarriage=e,this.calculateOccupiedSeats(i),this.calculateAvailableSeatsCount(i)}}))}showDialog(t){t.stopPropagation(),this.withRideInfo(i=>{let e=this.trimRideInformation(i,this.stationStart,this.stationEnd);this.dialogs.open(new Ve(Ze,this.injector),{size:"m",closeable:!0,dismissible:!0,data:{schedule:e.schedule,from:this.stationStart,to:this.stationEnd,path:e.path,rideId:e.rideId}}).pipe(j(1)).subscribe()})}trimRideInformation(t,i,e){let n=t.path.indexOf(i),a=t.path.indexOf(e),d=t.path.slice(n,a),l=t.schedule.segments.slice(n,a);return w(M({},t),{path:d,schedule:w(M({},t.schedule),{segments:l})})}goBack(){this.location.back()}onCarriageSelected(t){this.selectedCarriage=t}onSeatSelected(t,i){this.selectedSeatIndex=t,this.selectedCarriageIndex=i,this.selectedSeat=this.calculateAbsoluteSeatIndex(i,t),this.withRideInfo(e=>{this.selectedOrderCarriage=e.carriages[i]||null})}withRideInfo(t){this.rideInformation$.pipe(j(1)).subscribe(i=>{i&&t(i)})}getCarriageData(t){let i;return this.carriagesList$.pipe(j(1)).subscribe(e=>{i=e.find(n=>n.code===t)}),i||{code:"unknown",name:"Unknown Carriage",rows:0,leftSeats:0,rightSeats:0}}calculateAbsoluteSeatIndex(t,i){let e=0;return this.withRideInfo(n=>{for(let a=0;a<t;a+=1){let d=this.getCarriageData(n.carriages[a]);e+=d.rows*(d.leftSeats+d.rightSeats)}this.selectedSeat=e+i}),this.selectedSeat}calculateAvailableSeatsCount(t){this.availableSeatsCount=this.calculateTotalSeats(t)-this.occupiedSeats.length}calculateTotalSeats(t){return t.carriages.reduce((i,e)=>{let n=this.getCarriageData(e);return i+n.rows*(n.leftSeats+n.rightSeats)},0)}getAvailableSeatsCountForCarriage(t){let i=0,e=0;return this.withRideInfo(n=>{n.carriages.forEach(a=>{let d=this.getCarriageData(a),l=d.rows*(d.leftSeats+d.rightSeats);if(a===t){let I=this.occupiedSeats.filter(V=>V>e&&V<=e+l).map(V=>V-e);i+=l-I.length}e+=l})}),i}bookSeat(){this.selectedSeat!==null&&this.selectedCarriage&&this.rideInformation$&&this.withRideInfo(t=>{let i={rideId:t.rideId,seat:this.selectedSeat,stationStart:this.stationStart,stationEnd:this.stationEnd};this.orderService.createOrder(i).subscribe({next:()=>{this.bookingSuccess=!0,this.selectedSeat=null},error:e=>{e.status===400?e.error?.reason==="alreadyBooked"?(this.bookingError=!0,this.errorMessage=e.error.message,this.selectedSeat=null):e.error?.reason==="invalidRide"?(this.bookingError=!0,this.errorMessage="This trip is expired. Please select another trip.",this.selectedSeat=null):(this.bookingError=!0,this.errorMessage="An unknown error occurred while booking.",this.selectedSeat=null):e.status===401&&e.error?.reason==="invalidAccessToken"?this.router.navigate(["/signin"]):console.error("Unexpected booking error:",e)}})})}calculateOccupiedSeats(t){this.occupiedSeats=t.schedule.segments.reduce((i,e)=>[...i,...e.occupiedSeats],[]),this.occupiedSeats=Array.from(new Set(this.occupiedSeats))}getOccupiedSeatsForCarriage(t){let i=0,e=0,n=[];return this.withRideInfo(a=>{for(let l=0;l<t;l+=1){let I=this.getCarriageData(a.carriages[l]);i+=I.rows*(I.leftSeats+I.rightSeats)}let d=this.getCarriageData(a.carriages[t]);e=d.rows*(d.leftSeats+d.rightSeats),n=this.occupiedSeats.filter(l=>l>i&&l<=i+e).map(l=>l-i)}),n}static \u0275fac=function(i){return new(i||r)};static \u0275cmp=h({type:r,selectors:[["app-trip-details-page"]],standalone:!0,features:[v],decls:4,vars:2,consts:[["notFound",""],[4,"ngIf"],[1,"header"],["tuiAppBarBack","","tuiSlot","left",1,"button-back",3,"click"],[1,"tui-text_body-l-1"],[1,"ride"],["tuiButton","","size","s","appearance","outline",3,"click"],["class","booking-success",4,"ngIf"],["class","booking-error",4,"ngIf"],[1,"content"],["size","l"],[3,"click",4,"ngFor","ngForOf"],[1,"carriage-info"],[1,"carriages"],[4,"ngFor","ngForOf"],[1,"booking"],[1,"booking-info"],["tuiButton","",3,"click","disabled"],[1,"legend-container"],[3,"reservedSeats","availableSeats","selectedSeats"],[1,"booking-success"],[1,"booking-error"],[3,"click"],[1,"price"],["class","carriage-item",4,"ngIf"],[1,"carriage-item"],[3,"seatSelected","carriagesData","selectedSeatIndex","occupiedSeats"]],template:function(i,e){i&1&&b(0,Ct,3,3,"ng-container",1)(1,St,2,0,"ng-template",null,0,Se)(3,Ot,2,0,"ng-container",1),i&2&&(f("ngIf",!e.showNoRidesAvailable),c(3),f("ngIf",e.showNoRidesAvailable))},dependencies:[De,Pe,ye,Ie,we,Me,it,nt,ne,Ne,Ye,Y,Ke,Ge,We,Je,G],styles:["[_ngcontent-%COMP%]:root{--auth-font-weight: 600;--auth-container-width: 300px;--auth-container-padding: 20px;--auth-form-flex-gap: 20px;--auth-input-padding: 10px 5px}[_nghost-%COMP%]{display:flex;flex-direction:column;gap:20px;box-sizing:border-box;width:1160px;min-height:calc(100vh - 150px);margin:0}.header[_ngcontent-%COMP%]{display:flex;gap:20px;align-items:center;justify-content:flex-start;width:100%;height:70px}.header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}.ride[_ngcontent-%COMP%]{display:flex;gap:20px;align-items:center;margin-top:5px}.button-back[_ngcontent-%COMP%]{cursor:pointer}.carriage-info[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 200px;gap:10px;align-items:flex-start}.carriages[_ngcontent-%COMP%]{overflow-y:auto;display:flex;flex-direction:column;gap:10px}.carriage-item[_ngcontent-%COMP%]{border-radius:4px}.content[_ngcontent-%COMP%]{display:flex;flex:1;flex-direction:column;gap:20px}.legend-container[_ngcontent-%COMP%]{margin-top:auto;padding:20px 0}.booking[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px;box-sizing:border-box;width:200px;padding:10px;border:1px solid lightgray;border-radius:10px}.booking[_ngcontent-%COMP%]   .booking-info[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding-bottom:10px;border-bottom:1px solid lightgray}tui-segmented[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:5px;align-items:center}tui-segmented[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;line-height:1}tui-segmented[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]{font-size:11px}.booking-success[_ngcontent-%COMP%], .booking-error[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:5px;align-items:center;justify-content:center;padding:20px;border-radius:10px}.booking-success[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .booking-error[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;padding:0;font-size:16px;font-weight:700;text-align:center}.booking-success[_ngcontent-%COMP%]{border:2px solid var(--tui-text-positive)}.booking-error[_ngcontent-%COMP%]{border:2px solid var(--tui-text-negative-hover)}@media (min-width: 1024px) and (max-width: 1439px){[_nghost-%COMP%]{max-width:986px}}@media (min-width: 768px) and (max-width: 1023px){[_nghost-%COMP%]{max-width:calc(100vw - 40px)}.booking-info[_ngcontent-%COMP%]{flex-direction:column}.booking[_ngcontent-%COMP%]{width:100%}.booking[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:200px;margin:0 auto}.carriage-info[_ngcontent-%COMP%]{overflow:auto;display:flex;flex-direction:column-reverse}}@media (min-width: 425px) and (max-width: 767px){[_nghost-%COMP%]{max-width:calc(100vw - 20px)}.carriage-info[_ngcontent-%COMP%]{overflow:auto;display:flex;flex-direction:column-reverse}.booking[_ngcontent-%COMP%]{width:100%}.booking[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:200px;margin:0 auto}tui-segmented[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;font-size:12px}tui-segmented[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]{font-size:11px}}@media (min-width: 320px) and (max-width: 424px){[_nghost-%COMP%]{max-width:calc(100vw - 20px)}.carriage-info[_ngcontent-%COMP%]{overflow:auto;display:flex;flex-direction:column-reverse}.booking[_ngcontent-%COMP%]{width:100%}.booking[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:200px;margin:0 auto}tui-segmented[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;font-size:10px}tui-segmented[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]{font-size:8px}}"]})};export{rt as TripDetailsPageComponent};
